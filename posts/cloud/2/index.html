<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.ad2b543290cb20008039.css">html{font-size:100}body{margin:0 0 0 calc(100vw - 100%);color:#222;line-height:1.625;font-size:1rem;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}body,h1,h2,h3,h4,h5,h6{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif}h1,h2,h3,h4,h5,h6{font-weight:600}h1{font-size:2.5rem;line-height:3.25rem;margin-top:6.5rem;margin-bottom:1.625rem}h2{font-size:1.6875rem;line-height:2.4375rem}h2,h3{margin-top:3.25rem;margin-bottom:.8125rem}h3{font-size:1.375rem;line-height:1.625rem}h4{font-size:1.2rem;margin-top:2.4375rem}h4,h5{line-height:1.625rem;margin-bottom:.8125rem}h5,h6{font-size:1rem;margin-top:4.0625rem}h6{line-height:1.625rem;margin-bottom:.8125rem}img{max-width:100%;margin:inherit auto}hr,img{border:0;display:block}hr{color:#222;height:1.625rem;margin:3.25rem auto;background-size:100% 26px;background-image:linear-gradient(180deg,transparent 1px,transparent 11px,#222 0,#222 15px,transparent 0,transparent 26px);width:6.25rem}a{color:#5d93ff;text-decoration:none}a:active,a:focus,a:hover{color:#f7a046}b,strong{font-weight:600}ul{list-style:square;margin-bottom:1.625rem}ul li{padding:0 .3125rem;margin-bottom:.625rem}p{line-height:1.625rem;margin-bottom:1.625rem}blockquote{padding:0;font-style:italic;text-align:center}figure{display:block;width:100%;height:auto}figcaption{line-height:1.21875rem;margin-top:.40625rem;color:#222;font-size:.875rem;font-style:italic;margin-bottom:0;text-align:center}.anchor{margin-left:-1.875rem!important;padding-right:.875rem!important}@media screen and (min-width:685px){figure.float-left,figure.float-right{max-width:19.375rem;padding:0 1.625rem}.float-right{float:right}.float-left{float:left}}code[class*=language-],pre[class*=language-]{color:#657b83;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{background:#073642}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background-color:#fdf6e3}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#93a1a1}.token.punctuation{color:#586e75}.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#268bd2}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string,.token.url{color:#2aa198}.token.entity{color:#657b83;background:#eee8d5}.token.atrule,.token.attr-value,.token.keyword{color:#859900}.token.class-name,.token.function{color:#b58900}.token.important,.token.regex,.token.variable{color:#cb4b16}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.Author-module--author__photo--36xCH{display:inline-block;margin-bottom:0;border-radius:50%;background-clip:padding-box}.Author-module--author__title--2CaTb{font-size:1.125rem;font-weight:600;line-height:1.82813rem;margin:.8125rem 0}.Author-module--author__title-link--Yrism,.Author-module--author__title-link--Yrism:focus,.Author-module--author__title-link--Yrism:hover{color:#222}.Author-module--author__subtitle--cAaEB{color:#888;line-height:1.625rem;margin-bottom:1.625rem}@font-face{font-family:BM;src:url(/static/BMEuljiro10yearslaterOTF-cff030612de576843d7cfecd5ae28791.otf) format("opentype")}.Among-module--backgroundAmongWrap--313RB{position:absolute;left:0;top:0;z-index:-100;width:100vw;height:100vh}.Among-module--makeImpo--3MbMw{position:relative;color:#fff;background-color:red;font-family:BM;width:6.25rem;height:1.875rem;border-radius:.625rem;border:2px ridge #000;display:flex;align-items:center;justify-content:center;z-index:3;cursor:pointer}.Icon-module--icon--Gpyvw{display:inline-block;width:1em;height:1em;stroke-width:0;stroke:currentColor;fill:currentColor;font-style:normal;font-weight:400;speak:none;margin-right:.2em;text-align:center;font-variant:normal;text-transform:none;line-height:1em;margin-left:.2em;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.Contacts-module--contacts--1rGd1{margin-bottom:1.625rem}.Contacts-module--contacts__list--3OgdW{display:flex;flex-flow:row wrap;flex-grow:0;flex-shrink:0;list-style:none;padding:0;margin:.625rem -.1875rem;width:8.75rem}.Contacts-module--contacts__list-item--16p9q{padding:0;margin:.25rem;display:flex;align-content:center;align-items:center;justify-content:center;height:2.1875rem;width:2.1875rem;line-height:2.1875rem;border-radius:50%;text-align:center;border:1px solid #ebebeb}.Contacts-module--contacts__list-item-link--2MIDn{border:0;display:flex;color:#222}.Contacts-module--contacts__list-item-link--2MIDn:focus,.Contacts-module--contacts__list-item-link--2MIDn:hover{color:#5d93ff}.Copyright-module--copyright--1ariN{color:#b6b6b6;font-size:.875rem}.Menu-module--menu--Efbin{margin-bottom:1.625rem}.Menu-module--menu__list--31Zeo{list-style:none;padding:0;margin:0}.Menu-module--menu__list-item--1lJ6B{padding:0;margin:.625rem 0}.Menu-module--menu__list-item-link--10Ush{font-size:1rem;color:#222;font-weight:400;border:0}.Menu-module--menu__list-item-link--10Ush:focus,.Menu-module--menu__list-item-link--10Ush:hover{color:#5d93ff;border-bottom:1px solid #5d93ff}.Menu-module--menu__list-item-link--active--2CbUO{color:#222;border-bottom:1px solid #222}.Sidebar-module--sidebar--X4z2p{width:100%}.Sidebar-module--sidebar__inner--Jdc5s{position:relative;padding:1.5625rem 1.25rem 0}@media screen and (min-width:685px){.Sidebar-module--sidebar--X4z2p{width:calc(41.625% - 1.09375rem)}.Sidebar-module--sidebar--X4z2p:nth-child(1n){float:left;margin-right:1.875rem;clear:none}.Sidebar-module--sidebar--X4z2p:last-child{margin-right:0}.Sidebar-module--sidebar--X4z2p:nth-child(12n){margin-right:0;float:right}.Sidebar-module--sidebar--X4z2p:nth-child(12n+1){clear:both}.Sidebar-module--sidebar__inner--Jdc5s{padding:1.875rem 1.25rem 0}.Sidebar-module--sidebar__inner--Jdc5s:after{background:#e6e6e6;background:linear-gradient(180deg,#e6e6e6 0,#e6e6e6 48%,#fff);position:absolute;content:"";width:.0625rem;height:33.75rem;top:30px;right:-10px;bottom:0}}@media screen and (min-width:960px){.Sidebar-module--sidebar--X4z2p{width:calc(33.3% - 1.25rem)}.Sidebar-module--sidebar--X4z2p:nth-child(1n){float:left;margin-right:1.875rem;clear:none}.Sidebar-module--sidebar--X4z2p:last-child{margin-right:0}.Sidebar-module--sidebar--X4z2p:nth-child(3n){margin-right:0;float:right}.Sidebar-module--sidebar--X4z2p:nth-child(3n+1){clear:both}.Sidebar-module--sidebar__inner--Jdc5s{padding:2.5rem}}.Layout-module--layout--3Pyz6{max-width:66.875rem;margin-left:auto;margin-right:auto}.Layout-module--layout--3Pyz6:before{content:"";display:table}.Layout-module--layout--3Pyz6:after{content:"";display:table;clear:both}.Feed-module--feed__item--2D5rE{margin-bottom:2.03125rem}.Feed-module--feed__item--2D5rE:last-child{margin-bottom:.8125rem}.Feed-module--feed__item-title--3nigr{font-size:1.6875rem;line-height:2.4375rem;margin-top:0;margin-bottom:.8125rem}.Feed-module--feed__item-title-link--iFMRs{color:#222}.Feed-module--feed__item-title-link--iFMRs:focus,.Feed-module--feed__item-title-link--iFMRs:hover{color:#222;border-bottom:1px solid #222}.Feed-module--feed__item-description--1uO8e{font-size:1rem;line-height:1.625rem;margin-bottom:1.21875rem}.Feed-module--feed__item-meta-time--3t1fg{font-size:.875rem;color:#222;font-weight:600;text-transform:uppercase}.Feed-module--feed__item-meta-divider--N-Q0A{margin:0 .3125rem}.Feed-module--feed__item-meta-category-link--23f8F{font-size:.875rem;color:#f7a046;font-weight:600;text-transform:uppercase}.Feed-module--feed__item-meta-category-link--23f8F:focus,.Feed-module--feed__item-meta-category-link--23f8F:hover{color:#5d93ff}.Feed-module--feed__item-readmore--1u6bI{font-size:1rem;color:#5d93ff}.Feed-module--feed__item-readmore--1u6bI:focus,.Feed-module--feed__item-readmore--1u6bI:hover{color:#5d93ff;border-bottom:1px solid #5d93ff}.Page-module--page--2nMky{margin-bottom:3.25rem}.Page-module--page__inner--2M_vz{padding:1.5625rem 1.25rem}.Page-module--page__title--GPD8L{font-size:2.5rem;font-weight:600;line-height:3.25rem;margin-top:0;margin-bottom:2.35625rem}.Page-module--page__body--Ic6i6{font-size:1rem;line-height:1.625rem;margin:0 0 1.625rem}@media screen and (min-width:685px){.Page-module--page--2nMky{width:calc(58.275% - .78125rem)}.Page-module--page--2nMky:nth-child(1n){float:left;margin-right:1.875rem;clear:none}.Page-module--page--2nMky:last-child{margin-right:0}.Page-module--page--2nMky:nth-child(12n){margin-right:0;float:right}.Page-module--page--2nMky:nth-child(12n+1){clear:both}.Page-module--page__inner--2M_vz{padding:1.875rem 1.25rem}}@media screen and (min-width:960px){.Page-module--page--2nMky{width:calc(66.6% - .625rem)}.Page-module--page--2nMky:nth-child(1n){float:left;margin-right:1.875rem;clear:none}.Page-module--page--2nMky:last-child{margin-right:0}.Page-module--page--2nMky:nth-child(3n){margin-right:0;float:right}.Page-module--page--2nMky:nth-child(3n+1){clear:both}.Page-module--page__inner--2M_vz{padding:2.5rem 2.1875rem}}.Pagination-module--pagination--2H3nO{margin-top:3.25rem;display:flex}.Pagination-module--pagination__prev--bet5s{width:50%;text-align:left}.Pagination-module--pagination__prev-link--1Nzs6{color:#f7a046;font-size:1.625rem;font-weight:700}.Pagination-module--pagination__prev-link--1Nzs6:focus,.Pagination-module--pagination__prev-link--1Nzs6:hover{color:#5d93ff}.Pagination-module--pagination__prev-link--disable--Yklx9{pointer-events:none;color:#bbb}.Pagination-module--pagination__next--3hFiN{width:50%;text-align:right}.Pagination-module--pagination__next-link--3FUtA{color:#f7a046;font-size:1.625rem;font-weight:700}.Pagination-module--pagination__next-link--3FUtA:focus,.Pagination-module--pagination__next-link--3FUtA:hover{color:#5d93ff}.Pagination-module--pagination__next-link--disable--30UwZ{pointer-events:none;color:#bbb}.Author-module--author--2Yefr{border-top:1px solid #e6e6e6;max-width:46.25rem;padding-top:1.25rem;line-height:1.625rem;margin-top:1.625rem;margin-bottom:3.25rem}.Author-module--author__bio-twitter--n-O9n{display:block;text-decoration:underline}@media screen and (min-width:685px){.Author-module--author--2Yefr{margin-left:auto;margin-right:auto}}table{border-spacing:3px}td,th{border:1px solid #000;padding:0 .625rem;text-align:center}.Content-module--content--3p512{max-width:59.0625rem;padding:0 .9375rem;margin:0 auto}.Content-module--content__title--2BDW9{font-size:2rem;max-width:46.25rem;font-weight:600;text-align:center;line-height:2.68125rem;margin:1.625rem auto 0}.Content-module--content__body--2TrQ- figure{margin-bottom:1.625rem}.Content-module--content__body--2TrQ- figure blockquote{font-style:italic;text-align:center;margin-top:0;padding:1.625rem 0}.Content-module--content__body--2TrQ- figure blockquote p{max-width:46.25rem;font-size:1.6817rem;margin-top:0;margin-bottom:1.625rem;line-height:2.4375rem}.Content-module--content__body--2TrQ- a{text-decoration:underline}.Content-module--content__body--2TrQ- *{max-width:46.25rem;margin-left:auto;margin-right:auto}.Content-module--content__body--2TrQ- img{max-width:100%}@media screen and (min-width:960px){.Content-module--content--3p512{padding:0}.Content-module--content__title--2BDW9{font-size:3rem;line-height:3.65625rem;margin-top:3.65625rem;margin-bottom:2.4375rem}.Content-module--content__body--2TrQ-,.Content-module--content__body--2TrQ- p{font-size:1.125rem;line-height:1.82813rem;margin-bottom:1.82813rem}}.Meta-module--meta__date--29eD7{font-style:italic}.Tags-module--tags--1L_ct{margin-bottom:.8125rem}.Tags-module--tags__list--91FqN{list-style:none;margin:0 -.625rem;padding:0}.Tags-module--tags__list-item--1M30P{display:inline-block;margin:.625rem .3125rem}.Tags-module--tags__list-item-link--3SL_8{display:inline-block;height:2.1875rem;padding:0 1.5rem;line-height:2.1875rem;border:1px solid #e6e6e6;text-decoration:none;border-radius:1.25rem;color:#222}.Tags-module--tags__list-item-link--3SL_8:focus,.Tags-module--tags__list-item-link--3SL_8:hover{color:#5d93ff}.Post-module--post__comments--25y6I,.Post-module--post__footer--3WzWU{max-width:46.25rem;margin:0 auto;padding:0 .9375rem}.Post-module--post__home-button--16Kl0{display:block;max-width:5.625rem;height:2.1875rem;padding:0 1.5rem;line-height:2.1875rem;text-align:center;color:#222;border:1px solid #e6e6e6;border-radius:1.25rem;font-size:1rem;font-weight:400;margin-left:auto;margin-right:auto;margin-top:1.625rem}.Post-module--post__home-button--16Kl0:focus,.Post-module--post__home-button--16Kl0:hover{color:#5d93ff}@media screen and (min-width:960px){.Post-module--post__comments--25y6I,.Post-module--post__footer--3WzWU{padding:0}.Post-module--post__home-button--16Kl0{position:fixed;max-width:auto;margin:0;top:30px;left:30px}}</style><meta name="generator" content="Gatsby 2.25.3"/><link rel="alternate" type="application/rss+xml" title="Sulmo 블로그" href="/rss.xml"/><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="preconnect dns-prefetch" href="https://www.google-analytics.com"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-73379983-2"></script><script>
      
      
      if(true) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){window.dataLayer && window.dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-73379983-2', {"send_page_view":false});
      }
      </script><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><link rel="icon" href="/favicon-32x32.png?v=624cc4a835e68430a8beec01cef8ac6c" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><meta name="theme-color" content="#F7A046"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=624cc4a835e68430a8beec01cef8ac6c"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=624cc4a835e68430a8beec01cef8ac6c"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=624cc4a835e68430a8beec01cef8ac6c"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=624cc4a835e68430a8beec01cef8ac6c"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=624cc4a835e68430a8beec01cef8ac6c"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=624cc4a835e68430a8beec01cef8ac6c"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=624cc4a835e68430a8beec01cef8ac6c"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=624cc4a835e68430a8beec01cef8ac6c"/><title data-react-helmet="true">그림으로 배우는 클라우드 인프라와 API구조 9, 10장 - Sulmo 블로그</title><meta data-react-helmet="true" name="google-site-verification" content="CdZyL3igH_8uwN3VepRUweYAu5PbBtb1dZdydNmGdGg"/><meta data-react-helmet="true" name="description" content="ausg 5기 클라우드-테라폼 스터디 중 &#x27;그림으로 배우는 클라우드 인프라와 API구조&#x27;라는 책의 9, 10장 정리입니다."/><meta data-react-helmet="true" property="og:site_name" content="그림으로 배우는 클라우드 인프라와 API구조 9, 10장 - Sulmo 블로그"/><meta data-react-helmet="true" property="og:url" content="https://jeoungsulmo.github.io"/><meta data-react-helmet="true" property="og:image" content="https://jeoungsulmo.github.io/static/624cc4a835e68430a8beec01cef8ac6c/photo.jpg"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:title" content="그림으로 배우는 클라우드 인프라와 API구조 9, 10장 - Sulmo 블로그"/><meta data-react-helmet="true" name="twitter:description" content="ausg 5기 클라우드-테라폼 스터디 중 &#x27;그림으로 배우는 클라우드 인프라와 API구조&#x27;라는 책의 9, 10장 정리입니다."/><meta data-react-helmet="true" name="twitter:image" content="https://jeoungsulmo.github.io/static/624cc4a835e68430a8beec01cef8ac6c/photo.jpg"/><link as="script" rel="preload" href="/webpack-runtime-db149d7599a326f40917.js"/><link as="script" rel="preload" href="/framework-eb684e3e828ad13b3940.js"/><link as="script" rel="preload" href="/532a2f07-b716085e22ead3eba281.js"/><link as="script" rel="preload" href="/app-322bd83bbb4e184c49a7.js"/><link as="script" rel="preload" href="/styles-407fe62976dc5310c43e.js"/><link as="script" rel="preload" href="/cd95ea5cbd2c605f26db819f07999610c9ff4310-40d6230fbf0ed0654178.js"/><link as="script" rel="preload" href="/component---src-templates-post-template-js-67a0a83dd0cc3ba6607c.js"/><link as="fetch" rel="preload" href="/page-data/posts/cloud/2/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/251939775.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/401334301.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/825871152.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="Layout-module--layout--3Pyz6"><div><a class="Post-module--post__home-button--16Kl0" href="/">All Articles</a><div><div class="Content-module--content--3p512"><h1 class="Content-module--content__title--2BDW9">그림으로 배우는 클라우드 인프라와 API구조 9, 10장</h1><div class="Content-module--content__body--2TrQ-"><blockquote>
<p>이전 파트들은 항상 두장 중 한장까지만 정리되어서 블로그에 올라와있지 않습니다… 언젠가 다 정리하는걸로..</p>
</blockquote>
<h2 id="9장-인증과-보안" style="position:relative;"><a href="#9%EC%9E%A5-%EC%9D%B8%EC%A6%9D%EA%B3%BC-%EB%B3%B4%EC%95%88" aria-label="9장 인증과 보안 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>9장 인증과 보안</h2>
<h3 id="https" style="position:relative;"><a href="#https" aria-label="https permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>HTTPS</h3>
<p>이때까지 봐온 API들을 요청할 때 우리는 http통신을 사용해 왔습니다. 이러한 HTTP는 통신 내용이 평문으로 전달되기 때문에 중간에서 패킷을 뜯어보면 사람이 내용을 다 이해할 수 있습니다.</p>
<p>아래 이미지는 https를 적용하지 않은 tcpschool.com이라는 페이지에 접속했을 때 와이어 샤크를 통해 덤프뜬 패킷입니다.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/9c6a6d0d18defc14d2ff7e6c49c4e83c/14747/http.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 57.08333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB3klEQVQoz32T627aQBCF/f6P0x9tJZIWVU1LDAkGA75fwTZgwOB7uJ3ObISUVG1G+jSzs7tHZ8eyNA99TMdDDJ9kTFVFMFNHmIyeKSuCKs/QlAdxjvuj5z60yQgK5cC1sN+lWCcLbNMlpLGd4NNPDV96Jj4TX2Ub9+MEHSXCnRLjfhSjZx8wCGp0Jyt8o7076n1Xl7SX4Ld1wHDeCp6CBtImyzHWbOh2ANNbQLN8TAwPuhPCCmL4UYp4c8CueMG+OhIn7OvTayZ25Qu2eftK0UIqihyea8MyDQS+R7WDwHNxyHaoygI10dSVyLf1O6r3SMfTCfP5HKZpIo5jVFWFsiyx3W6R5zku1yvO5zMul4uA64+QmqbBarVCGIYwDANpmoJ7RVEI4bZtBXVdi/7xeMSJTPwPyXEceJ4n4Np1XSFu27aAa36BpmmYzWbCNcdb12+RbiI3URaIFgshxn0W41HwSLjHTjmuNIp/hRB06KJLYhZd8EnQDwLhiPF8HxEJip6uizFwsBsW/RtJp0OTwQDDh1/EA9TeI6b9PmRZhkxrnfYMVcVjt4sfnQ6yzQYfhWTTUzS6YE1niMjlkhyu6ckJuUqSBOl6TX+Di8CyEJLbLMuES54lwx+Px8CZ+QNJGTFnfakxBQAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <picture>
        <source
          srcset="/static/9c6a6d0d18defc14d2ff7e6c49c4e83c/8ac56/http.webp 240w,
/static/9c6a6d0d18defc14d2ff7e6c49c4e83c/d3be9/http.webp 480w,
/static/9c6a6d0d18defc14d2ff7e6c49c4e83c/e46b2/http.webp 960w,
/static/9c6a6d0d18defc14d2ff7e6c49c4e83c/f992d/http.webp 1440w,
/static/9c6a6d0d18defc14d2ff7e6c49c4e83c/05270/http.webp 1914w"
          sizes="(max-width: 960px) 100vw, 960px"
          type="image/webp"
        />
        <source
          srcset="/static/9c6a6d0d18defc14d2ff7e6c49c4e83c/8ff5a/http.png 240w,
/static/9c6a6d0d18defc14d2ff7e6c49c4e83c/e85cb/http.png 480w,
/static/9c6a6d0d18defc14d2ff7e6c49c4e83c/d9199/http.png 960w,
/static/9c6a6d0d18defc14d2ff7e6c49c4e83c/07a9c/http.png 1440w,
/static/9c6a6d0d18defc14d2ff7e6c49c4e83c/14747/http.png 1914w"
          sizes="(max-width: 960px) 100vw, 960px"
          type="image/png"
        />
        <img
          class="gatsby-resp-image-image"
          src="/static/9c6a6d0d18defc14d2ff7e6c49c4e83c/d9199/http.png"
          alt="http"
          title="http"
          loading="lazy"
          style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        />
      </picture>
  </a>
    </span>
아이디와 비밀번호가 입력한 그대로 잘 보입니다.</p>
<br/>
<p>그래서 클라우드환경에서 HTTP에 보안을 위해 암호화 및 복호화를 도와줄 SSL또는 TLS 프로토콜을 이 추가된 HTTPS를 사용합니다.</p>
<p>HTTPS를 사용중인 Daum에 접속시 와이어샤크에서는 TLS를 통해 암호화된 패킷만 확인이 가능했습니다.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/d93e1ee9b62340ecb610a20958d87863/14747/https.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 67.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAACbUlEQVQ4y4VUaU/bUBD0//8B/QQUWspVtUAJAaSqlShNiBKb+PlK4jgnR+6kQBAQwnTnoVfRT1garb1vdzyz68Rycj9R9BSUiqC8CJ4KBCFU0UWhkMPxyQ9kMr9wepqBKznPVTiziy9wXPhugMAP4PsezpQH6+BkHXtnKaTsIxyp7zgqHiKV30fa3kfK2cVeYRff8ttIS03aPsChnZbzFHZ+b+NQao/rx8gGWSGN4Iswy95YQf7jIuzVBeTXllDcXMHJ4js4G8vIfViAWl9GsPYerqDwaQne51XEX9dQ/SKQmOyso76zhdbWJjpKCBulMsoitdtsSfSRhJFG7IdoVmJMuj3gaY5Oo4kkiNCOEzRKFdTCElpyPh2O5PwJeHjA7P4eVrlSQVQu4+LqCp7vI65W9TPB+/5wCF48V56HIJI5B4GuZc14MsFwPJb4B7PZE6xEmgI5vLy8hCcNzWYTcRyjVCqhXq9jOp2+EF5cIBKyWq2GJEnQbrd1nallZK3FQ18Iz8/PdayIYhawudFo4ObmBs/Pz5qcOYI1Y1E1Go00huKCURMqGSQLwjDUIClzjFRs8q7roiwW+TJG9lAtyQz6/T4sFvKtbKqKfaqibTbymcqMNdrmaOim2+3+U/YaFhtIwGYWDgYDdDod3cw50RptE7T0INu8l20+Pj7KEmY6voZl5JvBktTkqJw2bm9vcX19rcneuizOgeqM3Sv5PJgj+AIqJlmv18NEPhEuaD6f/4fXOYskbKZtzoezMWRUyLnQ4t3dnY5vKszbNrLZLHK5nPwZFOA4jt6w2baxz2fzOXH75twsj/eR/JL+AgaU7OrOLdHXAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <picture>
        <source
          srcset="/static/d93e1ee9b62340ecb610a20958d87863/8ac56/https.webp 240w,
/static/d93e1ee9b62340ecb610a20958d87863/d3be9/https.webp 480w,
/static/d93e1ee9b62340ecb610a20958d87863/e46b2/https.webp 960w,
/static/d93e1ee9b62340ecb610a20958d87863/f992d/https.webp 1440w,
/static/d93e1ee9b62340ecb610a20958d87863/05270/https.webp 1914w"
          sizes="(max-width: 960px) 100vw, 960px"
          type="image/webp"
        />
        <source
          srcset="/static/d93e1ee9b62340ecb610a20958d87863/8ff5a/https.png 240w,
/static/d93e1ee9b62340ecb610a20958d87863/e85cb/https.png 480w,
/static/d93e1ee9b62340ecb610a20958d87863/d9199/https.png 960w,
/static/d93e1ee9b62340ecb610a20958d87863/07a9c/https.png 1440w,
/static/d93e1ee9b62340ecb610a20958d87863/14747/https.png 1914w"
          sizes="(max-width: 960px) 100vw, 960px"
          type="image/png"
        />
        <img
          class="gatsby-resp-image-image"
          src="/static/d93e1ee9b62340ecb610a20958d87863/d9199/https.png"
          alt="https"
          title="https"
          loading="lazy"
          style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        />
      </picture>
  </a>
    </span></p>
<p>여기서 암호화를 하는 방식인 <strong>대칭키 암호화</strong> 방식과 <strong>공개키 암호화</strong>(비대칭키) 방식이 나오는데 https통신은 이 두가지를 모두 이용해 통신합니다.</p>
<p>(책에서는 공유키와 공개키로 설명이 되어있는데 구글링에서 모두 공유키를 대칭키로 부르는것 같아 대칭키로 부르겠습니다.)</p>
<p>일단 두암호화의 작동방식과 특징은 아래와 같습니다.(공개키 암호화 방식중 RSA 방식은 aws에서 ec2를 ssh로 접속할때도 사용되는 방식입니다.)</p>
<ul>
<li>
<p>공개키 암호화 방식</p>
<ul>
<li>A키로 암호화를 하면 B키로 복호화가 가능하다.</li>
<li>B키로 암호화를 하면 A키로 복호화가 가능하다.</li>
</ul>
</li>
<li>
<p>대칭키 암호화 방식</p>
<ul>
<li>동일한 키로 암호화 복호화가 가능하다.</li>
</ul>
</li>
</ul>
<p>이렇게 작동하는 두가지 방식의 암호화 방식을 https는 둘다 사용합니다. 이유는 아래와 같습니다.</p>
<ul>
<li>
<p>대칭키 사용시</p>
<ul>
<li>대칭키를 사용시 같은키로 암호화 복호화를 둘다 수행하게됩니다. 그럼 클라이언트(사용자, 브라우저)와 서버가 둘만 아는 대칭키를 가지고 있어야하는데, 이를 위해 한번은 평문 통신을 하게됩니다. 대칭키가 노출될 위험이 있어 보안에 좋지 못합니다.</li>
</ul>
</li>
<li>
<p>비대칭키</p>
<ul>
<li>일단 비대칭키를 일반적으로 공유하는건 위와 같은 위험이 있고, 그래서 CA라는 인증기관을 거쳐 우리는 비대칭키를 공유합니다. 그래서 클라이언트와 서버가 둘다 비대칭키를 안전하게 얻을 수 있지만 비대칭키는 <u>암복호화 속도가 느리고 비용이 많이들어</u> 비대칭키로만 사용하지 않습니다.</li>
</ul>
</li>
</ul>
<h3 id="사용자-그룹-롤-정책" style="position:relative;"><a href="#%EC%82%AC%EC%9A%A9%EC%9E%90-%EA%B7%B8%EB%A3%B9-%EB%A1%A4-%EC%A0%95%EC%B1%85" aria-label="사용자 그룹 롤 정책 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>사용자, 그룹, 롤, 정책</h3>
<p>사용자에 대한 인증을 처리하는 AWS IAM 관련 설명 들입니다.</p>
<h4 id="테넌트" style="position:relative;"><a href="#%ED%85%8C%EB%84%8C%ED%8A%B8" aria-label="테넌트 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>테넌트</h4>
<p>클라우드의 취상위 개념입니다. AWS에서는 Account 단위를 말합니다. 하나의 테넌트는 또 다른 테넌트와 완전히 격리 되어있으며 원칙적으로 여러 테넌트에 걸쳐 작업을 하는건 불가능합니다.</p>
<h4 id="사용자" style="position:relative;"><a href="#%EC%82%AC%EC%9A%A9%EC%9E%90" aria-label="사용자 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>사용자</h4>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 702px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/90ff73c71599f567392ceca741b922c9/d6331/aws_login.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 177.91666666666669%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAkCAYAAACJ8xqgAAAACXBIWXMAABYlAAAWJQFJUiTwAAAE20lEQVRIx51WS2/jVBTOL2ADArb8kJH4GUi8dixYMCxGbNjAapbs2ABCMEJiwbAoUlkUdTRD6aSUtvSRZ+0ktuO3EztOHMfPj3Nu47RMNTNNrX49ftz73XPuOee7qYEuuTfA0fEZFG2Ig6MT2LbDr1GWpcA6V60oCvyysYX7X32Lr7/7Gd88eIi/9s/Ex6K4BWFZZLDPnyI025jYPQTDE4waG0sPsT6h+B+bgPY7oP4GWH8CkXpJtLaHz0wol1jtIbC+h1mWIk1iQoIiT4VXt/YwTVNsbf2BZquFR48ewTTN/yVkXVBSCniug2A8FjZJFleCX/+qsSdBBkxp/rwAQop4Ss9+XGIUZRhHOdl8ZZ+H8TxHTlw1mg+jrULZ/xf/tHto9TTsHpxCc0NE9C1IaIGcFsqu2wrsgD0rkGRMSJ7ZzgzW0MbecRPHLQk7fx9ANV30dQu660NWDSjWGJ2Bjr7hoasY6JseBtYIsu5g6AZwaJUkZ8K8gBMD4zjH0VkHbVlBc2DiuD/CXlPBoWRhv6VAc4hYszAwXEiqiQERavZYPBveBO5sRVhCDXKYkwSNgQXJGEOmFU6NBE07w6mZQBoVcHlR2p/RYmmTi/vKGuEy5IJSPZlnoD/Q1iApL2xKCYoWGeI0FzaMMxqXrhAKVO8yTOk7c9W4cBfxHD6VjaoqcGwLPVnGJAhuUNjlCmVOhFSCovWSJIVlWdjbq6PVauPJkyfQNA0Bkc7n8dLOMZvN4PuBsPN4gYDLapYKm2Y5rV1cyBeTxosUHUrIaDTCcDgUVpIkeJ5HnqvC6rqOwWAAi7ppRMRD2ry+HUF151gk2SVhTu7OkxzGeIHbXkWeX4b8woE0KMuyG0H0Mk/g/ZtMJkIYxpQcfubwbNtGFEXr9TIzt0hpDMPA4eGh2KNutyvueQ8dx7nM6UuUZqWH7GUcxyLbi8VCZJFlje9FdslL/p7TPj0Pq5CZkMtCoxOPs8vlMlAUkVlFUaGT5xy67/tiAi9+HaUgFEm5iSKXq/ouXoBlyBGVy0c/6Xj3BxMf/GjifQFDWH5+j95/9quBew/pfvnuKj58YOKd7018vmGJ4q4FUYq37u3i1U/qeONuHa8/g9fu7uHOl7u488UOjdm7NubNT+t45eOnePv+EWIqblGHxpirfUaVf2FVL8LQm0InsNDK5gQ9K6T7GTSPxtH36p6huFNYxLGqQ9em+vMcKH0Zoe8hcA2YoykRx5hQBE5I8kaLTSdjuI4F29TpDPLgWIaY6xHEaVnVoUIZbbc7kOg3Tmfoo6X5kKwITX2GjhnjRDJwLvdx3u2g02lDliVYlHnDMCGRMslyjxrBuMgyE3JZtNtt9Pp9NLs9NLp9aHQEyIqORkemST102k30OWwnxNm5JiSuT+O5CbgpuE5Xvcyk3GKMMJyQFvqI5xHm0QxTep5NpwipNVlAYjqE/DAStTul99wE3ABVJ9WqYq0sX9wZBvU1h+GRjHFRuy6dHYaOEckYi3FCvzIqkgvFyi875WoHXCV+YbGXxbV5q9+HHD/3Lq/K4C1gQWX14f1lgWDLXrIKsTJdHc/gsMUesqs8kSWrAhPU63Vsb29jZ2dH4PHjx9jd3cXm5iYajYYY8+ycVVKYnb1kLJaWvbyqJJXlSexdNb4Ce8lc/wHHEaXtRmhfOgAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <picture>
        <source
          srcset="/static/90ff73c71599f567392ceca741b922c9/8ac56/aws_login.webp 240w,
/static/90ff73c71599f567392ceca741b922c9/d3be9/aws_login.webp 480w,
/static/90ff73c71599f567392ceca741b922c9/de2ca/aws_login.webp 702w"
          sizes="(max-width: 702px) 100vw, 702px"
          type="image/webp"
        />
        <source
          srcset="/static/90ff73c71599f567392ceca741b922c9/8ff5a/aws_login.png 240w,
/static/90ff73c71599f567392ceca741b922c9/e85cb/aws_login.png 480w,
/static/90ff73c71599f567392ceca741b922c9/d6331/aws_login.png 702w"
          sizes="(max-width: 702px) 100vw, 702px"
          type="image/png"
        />
        <img
          class="gatsby-resp-image-image"
          src="/static/90ff73c71599f567392ceca741b922c9/d6331/aws_login.png"
          alt="aws login"
          title="aws login"
          loading="lazy"
          style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        />
      </picture>
  </a>
    </span></p>
<p>위의 이미지는 AWS로그인 인터페이스입니다. 기본적으로 회원가입시 제출된 정보로 로그인하고 EC2, S3, RDS, 라우터 등등 많은 API들 사용하게 됩니다. 이 계정이 <strong>루트 사용자</strong>입니다.</p>
<p><strong>IAM사용자</strong>는 루트사용자가 생성한 그룹, 역할, 정책들이 적용된 계정입니다.</p>
<p>개인적인 용도로만 사용시 굳이 만들 필요가 없었지만, 기업과 같은 조직이 인프라를 구축하기위해서는 많은 사람들이 한 테넌트에 접근해야 합니다. 이때 루트권한을 가진 계정으로 다수의 사람이 접근하는건 보안상 좋지 못합니다.</p>
<p>이러한 IAM사용자들을 묶어놓은 <strong>그룹</strong>이라는 개념이 존재합니다. 사용자별 일일이 정책을 부여하는것이 아닌 그룹에 일원으로 두어 반복을 줄여주고 관리하기 쉽게 만들어 줍니다.</p>
<h4 id="정책" style="position:relative;"><a href="#%EC%A0%95%EC%B1%85" aria-label="정책 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>정책</h4>
<p>권한을 제어할 때 사용하는 기능입니다. AWS에 수많은 API들이 존재하고 이를 아무나 마음대로 손대면 위험합니다.</p>
<p>JSON의 형태로 API의 접근과 실행을 제어해 권한을 설정합니다.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/d3b00dc491245a60fe2ba9f019d21ef1/09096/Policies.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 68.75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB7ElEQVQ4y42TWXKkMBBE+/7/c4a5xXz7EN3j9jRLI9CCWMTSkK4UxsZhx4SJyBBCUtWrLHRSSuGWJDCuQd91aNsW0zRhnmfMMk4HjeP4vsZ3rQ2MrvCcKPz6k+H3U4FT0zSo6xrOORhjoY2Bk7n3PiqEgGEYohiECbmXZygj+3kuVxpJJgGrqsL1esW/lxdUpUKpChTFPep+51iAVeR5jjRN43uWZTifz7hcLu/fU6mS50/MbCVLWlRISo9U5LyU3vXohS4EGftNTECiTqwhCGlZAcdc1pQqcVpXYAwtvCtxdxNUPUTZbsIqi7v4sFRatCxLTLA/nFtrY7LTsqwInXhm8hiwsEJixbdxlkBL3LyLB+gbm0Kq/TvnXNNaS0DJPvQejS2QuxHKBWg/YF0+B9spSPh4PGLZJOd3zremvhEOQlhrMdeOQtcjM+LZMANvB35CSE8pIUQk9EKovJQshCzZ99MXwt3DIyHF+YeH60bozR2JGZHoDreqR92NmB+fA9KjI+Ee8CthtxEW9UYYpCF7935CyIBMRMoPD4UwEw9zQzq5ZtPj2y7z9nxHSPqty8vW5dbJLREPK7/9h/SxDfN/CY9N4RoVSw6NgVU3PJcD/hYtdDNiEMJWOr0cfm5eO5bFgCQ9EvIW8Rq+AmooN3D/1E9XAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <picture>
        <source
          srcset="/static/d3b00dc491245a60fe2ba9f019d21ef1/8ac56/Policies.webp 240w,
/static/d3b00dc491245a60fe2ba9f019d21ef1/d3be9/Policies.webp 480w,
/static/d3b00dc491245a60fe2ba9f019d21ef1/e46b2/Policies.webp 960w,
/static/d3b00dc491245a60fe2ba9f019d21ef1/f992d/Policies.webp 1440w,
/static/d3b00dc491245a60fe2ba9f019d21ef1/882b9/Policies.webp 1920w,
/static/d3b00dc491245a60fe2ba9f019d21ef1/fcb4a/Policies.webp 2104w"
          sizes="(max-width: 960px) 100vw, 960px"
          type="image/webp"
        />
        <source
          srcset="/static/d3b00dc491245a60fe2ba9f019d21ef1/8ff5a/Policies.png 240w,
/static/d3b00dc491245a60fe2ba9f019d21ef1/e85cb/Policies.png 480w,
/static/d3b00dc491245a60fe2ba9f019d21ef1/d9199/Policies.png 960w,
/static/d3b00dc491245a60fe2ba9f019d21ef1/07a9c/Policies.png 1440w,
/static/d3b00dc491245a60fe2ba9f019d21ef1/29114/Policies.png 1920w,
/static/d3b00dc491245a60fe2ba9f019d21ef1/09096/Policies.png 2104w"
          sizes="(max-width: 960px) 100vw, 960px"
          type="image/png"
        />
        <img
          class="gatsby-resp-image-image"
          src="/static/d3b00dc491245a60fe2ba9f019d21ef1/d9199/Policies.png"
          alt="Policies"
          title="Policies"
          loading="lazy"
          style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        />
      </picture>
  </a>
    </span></p>
<p>미리 만들어져있는 정책들도 있으며 사용자가 직접 원하는 정책을 만들어 사용해도 됩니다.</p>
<h5 id="aws-iam-정책의-기본-요소" style="position:relative;"><a href="#aws-iam-%EC%A0%95%EC%B1%85%EC%9D%98-%EA%B8%B0%EB%B3%B8-%EC%9A%94%EC%86%8C" aria-label="aws iam 정책의 기본 요소 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>AWS IAM 정책의 기본 요소</h5>
<ul>
<li>Effect : 허가여부 판단 (Allow/Deny)</li>
<li>Action : 허가하거나 거부할 액션 API를 기재</li>
<li>리소스 : 허가하거나 거부할 리소스를 ARN 형식으로 기재합니다.</li>
</ul>
<p>정책 예시</p>
<ol>
<li>IAM의 사용자 ‘abc’에게 사용자 정보 조회를 허용한다.</li>
<li>Amazon S3의 모든 버킷에 대해 모든 기능을 허용한다.</li>
<li>Amazon S3의 important라는 버킷에 대해 변경과 삭제를 금지한다.</li>
</ol>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"Version"</span><span class="token operator">:</span> <span class="token string">"2012-10-17"</span><span class="token punctuation">,</span>
  <span class="token property">"Statement"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token comment">// 1</span>
      <span class="token property">"Effect"</span><span class="token operator">:</span> <span class="token string">"Allow"</span><span class="token punctuation">,</span>
      <span class="token property">"Action"</span><span class="token operator">:</span> <span class="token string">"iam:GetUser"</span><span class="token punctuation">,</span>
      <span class="token property">"Resource"</span><span class="token operator">:</span> <span class="token string">"arn:aws:iam::123456789012.user/abc/"</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token comment">// 2</span>
      <span class="token property">"Effect"</span><span class="token operator">:</span> <span class="token string">"Allow"</span><span class="token punctuation">,</span>
      <span class="token property">"Action"</span><span class="token operator">:</span> <span class="token string">"s3:*"</span><span class="token punctuation">,</span>
      <span class="token property">"Resource"</span><span class="token operator">:</span> <span class="token string">"arn:aws:s3:::*"</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token comment">// 3</span>
      <span class="token property">"Effect"</span><span class="token operator">:</span> <span class="token string">"Deny"</span><span class="token punctuation">,</span>
      <span class="token property">"Action"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"s3:Put*"</span><span class="token punctuation">,</span> <span class="token string">"s3:Delete*"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">"Resource"</span><span class="token operator">:</span> <span class="token string">"arn:aws:s3:::important"</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre></div>
<ul>
<li>같은 Statement 안에 조건들은 AND로, 다른 statement일시 OR 조건으로 적용됩니다.</li>
<li>2,3번 조건에서 같은 범위의 조건이 중첩되어있는데 이때 명시적인 Deny의 우선순위가 더 높습니다.</li>
</ul>
<h5 id="정책-정의하기" style="position:relative;"><a href="#%EC%A0%95%EC%B1%85-%EC%A0%95%EC%9D%98%ED%95%98%EA%B8%B0" aria-label="정책 정의하기 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>정책 정의하기</h5>
<ul>
<li>위와 같이 JSON의 형태로 직접 스크립트를 짜는 방식</li>
<li>GUI를 통해 원하는 서비스, 작업, 리소스, 요청조건을 설정하는 방식</li>
</ul>
<p>위의 두가지 방식의 정책 생성 방식이 있습니다. 뭘하든 속성 정의를 위한 AWS 서비스, 작업, 리소스등의 사전 지식이 필요로합니다..</p>
<h3 id="인증-키와-토큰" style="position:relative;"><a href="#%EC%9D%B8%EC%A6%9D-%ED%82%A4%EC%99%80-%ED%86%A0%ED%81%B0" aria-label="인증 키와 토큰 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>인증 키와 토큰</h3>
<p>IAM 사용자를 생성 후 cvs파일로 내려받으면 아래와 같은 정보가 있습니다.
<span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/bf923627a250e7c2d134a3fae67639ac/5fada/auth_key.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 6.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAU0lEQVQI1wXBSwqAIBRA0fa/jKJBkyAIbCKIpWVP+5FNai+3cwo1KCbvkFLI44PTnr3ayfrBzhbTGY7m4O0/TnshSfDBY1pDqjdEImsUlhC4880PZghCTua9hUMAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <picture>
        <source
          srcset="/static/bf923627a250e7c2d134a3fae67639ac/8ac56/auth_key.webp 240w,
/static/bf923627a250e7c2d134a3fae67639ac/d3be9/auth_key.webp 480w,
/static/bf923627a250e7c2d134a3fae67639ac/e46b2/auth_key.webp 960w,
/static/bf923627a250e7c2d134a3fae67639ac/f992d/auth_key.webp 1440w,
/static/bf923627a250e7c2d134a3fae67639ac/25962/auth_key.webp 1706w"
          sizes="(max-width: 960px) 100vw, 960px"
          type="image/webp"
        />
        <source
          srcset="/static/bf923627a250e7c2d134a3fae67639ac/8ff5a/auth_key.png 240w,
/static/bf923627a250e7c2d134a3fae67639ac/e85cb/auth_key.png 480w,
/static/bf923627a250e7c2d134a3fae67639ac/d9199/auth_key.png 960w,
/static/bf923627a250e7c2d134a3fae67639ac/07a9c/auth_key.png 1440w,
/static/bf923627a250e7c2d134a3fae67639ac/5fada/auth_key.png 1706w"
          sizes="(max-width: 960px) 100vw, 960px"
          type="image/png"
        />
        <img
          class="gatsby-resp-image-image"
          src="/static/bf923627a250e7c2d134a3fae67639ac/d9199/auth_key.png"
          alt="auth key"
          title="auth key"
          loading="lazy"
          style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        />
      </picture>
  </a>
    </span></p>
<p>AWS 콘솔에서는 ID와 PW로 인증하지만 API, CLI, SDK를 사용시 access<em>key와 secret</em>access_key를 사용하기도 합니다.</p>
<p>위와 같이 접근을 통해 바로 기능들을 사용하는것이 아닌 토큰을 발급받아 토큰을 통해 기능들을 사용합니다.</p>
<h3 id="전자서명" style="position:relative;"><a href="#%EC%A0%84%EC%9E%90%EC%84%9C%EB%AA%85" aria-label="전자서명 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>전자서명</h3>
<p><a href="https://www.youtube.com/watch?v=O7SiDuTCysM" target="_blank" rel="nofollow noopener noreferrer">전자서명</a>이란, 클라이언트가 실제 존재하는 클라이언트인지 확인, 클라이언트로부터 전송된 데이터가 위변조되지는 않았는지를 확인하기 위해 사용하는 것입니다.</p>
<p>AWS는 요청 값, 요청 정보의 해시 값, 시크릿 액세스 키를 조합해 전자 서명을 만들게 됩니다.</p>
<p>AWS의 API들을 이용하는 사용자가 맞는지 판단하기위해 AWS만의 방식이 존재합니다.</p>
<h3 id="역할" style="position:relative;"><a href="#%EC%97%AD%ED%95%A0" aria-label="역할 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>역할</h3>
<p><del>이제까지 액터 기준으로 시스템을 설계해온 사람들은 이해하기 어렵다는데 저는 설계한적이 없어 감이 안옵니다^^</del></p>
<p>일단 역할을 설명하기전에 정책을 다시한번 보면, 정책은 액터인 사용자나 그룹에 할당해야 했습니다. 하지만 클라우드 환경에서는 리소스의 입장 또한 생각해줄 필요가 있습니다.</p>
<p>그래서 AWS에는 <strong>IAM롤</strong>과 <strong>리소스 기반 정책</strong>이 있습니다.</p>
<h4 id="iam-롤과-리소스기반-정책" style="position:relative;"><a href="#iam-%EB%A1%A4%EA%B3%BC-%EB%A6%AC%EC%86%8C%EC%8A%A4%EA%B8%B0%EB%B0%98-%EC%A0%95%EC%B1%85" aria-label="iam 롤과 리소스기반 정책 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>IAM 롤과 리소스기반 정책</h4>
<p>IAM 사용자를 만들때 해당 계정에게 적용되는 정책을 관리자는 부여했습니다. 이렇게 생성된 계정에 추가적인 권한을 부여하고싶거나, 혹은 여러 특정 사용자들에게 역할을 부여해 사용해야할 상황이 존재합니다.</p>
<p>그래서 우리는 역할이라는 개념을 두고 관리자가 특정 IAM 사용자에게 역할을 부여할 수 있습니다. 이렇게 역할을 생성해 권한을 부여하면 시크릿 액세스 키를 API사용처마다 복사해 사용하는 것을 방지하여 STS가 효율적으로 사용됩니다.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/956469beb1c3e1f73030233292a155b6/d9ed5/IAMrole.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 44.583333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAACGElEQVQoz12Sf0tTYRTH9wr8I6r/Cn9G6tSmTWu23MrSYhFFgUgRBEJFpYhEkqD2g6jeQC8iKqGXEb0CnW5uuc3tzt17d693u3efznNXBh748jwH7vM533PODSy/+8Ti8nuWXn9kbukDJyfmab82T5vo+KU5jsaf0zL6mJbIIzpHEvSGY3QMjNHeF2UscYu7D++RmJ7mSHyWkalXBGqOTXF3l7qc+w14s7bFytcNVr8lWfm+5Wt1LcXbHxkm7y/QHYrS2R/l1GCM4PlJTnRH6AiNM/P5J19+lQlYepmas4+KRsMDb59qpQh1i8Ox+HKJ02eiDIbj9A/F6D13ldZghLNjCRxzz/8moBsGlmULrIEYxDJMCpkspq5jVpoy9ipYkj97ukCXAPpCFwkOxQnHb9IVijEQmSSV3GoCbdvGcRw/8RSx5mAU8mwnk6TX19lJpynt7FCRsUw9eMKx1gHagqO0ygxHBNgTHqc7fJnUxuZfh1K5Wq0etGXL3ayIfdeVCl7zVKOQmH2xTM/wOOHYDYZF0Yk7hC5cZ/TKbdLJzf8O/wGVQdeyKP/OUszlKGSzaPk8mjhWZzMvYGgaekmjWiqR394mJ3IMnYYUDyiYgjaXIpKWzVJRHmfY9QE5zLLmyxbnNdMENaJ6jZoUr7veQXdqDz7QkMW4qjUJUx6o38inHw61OBmD57nYjkuxrJPK5MhJN5q4VsA/rFs/ThM40nQAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <picture>
        <source
          srcset="/static/956469beb1c3e1f73030233292a155b6/8ac56/IAMrole.webp 240w,
/static/956469beb1c3e1f73030233292a155b6/d3be9/IAMrole.webp 480w,
/static/956469beb1c3e1f73030233292a155b6/e46b2/IAMrole.webp 960w,
/static/956469beb1c3e1f73030233292a155b6/f992d/IAMrole.webp 1440w,
/static/956469beb1c3e1f73030233292a155b6/882b9/IAMrole.webp 1920w,
/static/956469beb1c3e1f73030233292a155b6/d3d72/IAMrole.webp 2880w"
          sizes="(max-width: 960px) 100vw, 960px"
          type="image/webp"
        />
        <source
          srcset="/static/956469beb1c3e1f73030233292a155b6/8ff5a/IAMrole.png 240w,
/static/956469beb1c3e1f73030233292a155b6/e85cb/IAMrole.png 480w,
/static/956469beb1c3e1f73030233292a155b6/d9199/IAMrole.png 960w,
/static/956469beb1c3e1f73030233292a155b6/07a9c/IAMrole.png 1440w,
/static/956469beb1c3e1f73030233292a155b6/29114/IAMrole.png 1920w,
/static/956469beb1c3e1f73030233292a155b6/d9ed5/IAMrole.png 2880w"
          sizes="(max-width: 960px) 100vw, 960px"
          type="image/png"
        />
        <img
          class="gatsby-resp-image-image"
          src="/static/956469beb1c3e1f73030233292a155b6/d9199/IAMrole.png"
          alt="IAMrole"
          title="IAMrole"
          loading="lazy"
          style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        />
      </picture>
  </a>
    </span></p>
<p>이런식으로 test-ec2라는 IAM사용자로 ec2As3라는 역할을 적용해본 결과입니다. 블로그에 과정 전체를 담아보고 싶었지만 더 좋은 <a href="https://whchoi98.gitbook.io/aws-iam/iam-role" target="_blank" rel="nofollow noopener noreferrer">gitbook</a>이 존재함으로 한번 따라해보시면 더 이해하기 좋을것 같습니다.</p>
<p>그리고 책에서 정책에대한 방향성설명이 있었습니다.</p>
<ul>
<li>IAM 롤과 이롤에 적용된 정책을 이해할 때 중요한 것은 이정책이 제어를 하려는 주체르 위한 것</li>
<li>반대로 리소스 기반 정책은 이 정책이 제어를 당하는 대상을 위한 것</li>
</ul>
<p>이 말이 정확히 이해가 가지 않았고 직접 AWS IAM 롤 생성시 설정하는 정책은 2가지가 있었는데</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/a08e802ef2323f3681ebc9da949ad5cf/798d4/policies_role.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 97.08333333333334%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAABYlAAAWJQFJUiTwAAAB/0lEQVQ4y6VU227UMBDNVyPxJ7zxgsRfVOIBiUpQ0V3ggQKCzT3NOokdJ87NhxmXQLpkSypGOuvIHh2fmTNe7/mrAE9e7PH05Uc8u/Dxv+ENRqOWBfI0QhIeEIYhhCjuoSi2w8uPRxx8H++vd7i8fIMP+x2SKEQS/wFfEgQBrYTgAVCe1/U9lCxh49fICoXvtw2+xBW+JdLhaywhtcE4DOgp91/wpmlC37Ww2RVEVSOrOqSVQVoa+jY4qg7TZGHtNnh9P6DRClZ8IoU1DreaUONHVrs1FtqpGzbC67oOUipkQqIsBFoi16qCLAVqWk2rofV2eFw3N/zq3VvsdnvEcQLfD/D55sY1WSpFFTyCkBVWFSmS0oE3m6ZB27YOxpg79B0M5f5eaW/OWcLjAyYqy9KtHKya9/mycRxBP7CqgW3JIE0Gmg6WjFod7JmQh5IJOPI8RxRFVH4MntOuadEkOca6wUSTMDXGXcSUf7m8JORvDnaL23AkMm7BSKM12HVF9tf+KuGscJnIfRFC0ATQObXCksqxkBhJ6ZLswZLn2ziYLEkSZFkGTWZNkhSnAoPS4EdxlpBNWSp0ZlBwyWmauvI5h9vhTOFL79jOK2R3+ZDJ5rd52oJzPbxHyAZwac4AIpvNOS1/7e2ulsyEXE5d12eJNv/BzoRc9lziqaLHxE+D+sFRvJmFdAAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <picture>
        <source
          srcset="/static/a08e802ef2323f3681ebc9da949ad5cf/8ac56/policies_role.webp 240w,
/static/a08e802ef2323f3681ebc9da949ad5cf/d3be9/policies_role.webp 480w,
/static/a08e802ef2323f3681ebc9da949ad5cf/e46b2/policies_role.webp 960w,
/static/a08e802ef2323f3681ebc9da949ad5cf/a8e2b/policies_role.webp 976w"
          sizes="(max-width: 960px) 100vw, 960px"
          type="image/webp"
        />
        <source
          srcset="/static/a08e802ef2323f3681ebc9da949ad5cf/8ff5a/policies_role.png 240w,
/static/a08e802ef2323f3681ebc9da949ad5cf/e85cb/policies_role.png 480w,
/static/a08e802ef2323f3681ebc9da949ad5cf/d9199/policies_role.png 960w,
/static/a08e802ef2323f3681ebc9da949ad5cf/798d4/policies_role.png 976w"
          sizes="(max-width: 960px) 100vw, 960px"
          type="image/png"
        />
        <img
          class="gatsby-resp-image-image"
          src="/static/a08e802ef2323f3681ebc9da949ad5cf/d9199/policies_role.png"
          alt="policies role"
          title="policies role"
          loading="lazy"
          style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        />
      </picture>
  </a>
    </span>
위와같은 제어 주체를 위한 편집란이 있었고</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/dac04109cc5d353393b7c60dbb07c485/b94e3/principal.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAABq0lEQVQ4y51U2ZLiMBDL/3/c8EANsA8cAXKfJIRcdrSt3g0LUzM71LhKZceJZUtqxzmfz1itVthut9hsNor1eo2fNifPc2RZhjRNwXGSJAjDELfbDV3XKdq2fULf99oPwwBr7ROcoigQx7GSkoyIogi+7yOR+VSeOQ6CQN9xzI25aV3Xeqppmu5wPM8DZY/j+COJj2RKSKmu6+opKZNoRaY1FqZuYJobxqv0MmeMUXyU+SSZhKfTSYkYyHK5xLuEVGQ56l879H4ME6YwZQVjzfeh0LvD4aCSSU6P6E/TNOjNCCsyvpL3GfSEx+NRk2Oj8fv9XucueYHBj9AJzAseP3nI8mCrqgqLxQJvAv/govJDXIMYVvwkTHHBGCSCGGOcwVZXmaswDX82vHs4n5BSaUMjnkLUTuKdzUpdpMgKjF70j/BSy1yJSQK5Ez6ekOS8KbvdDqXUWxclaEUySQbXwxBJQH8Xfyp59oyhECx0hkQPWUql+JjJN5IOJnk/SdlwIT5iTpmLSMiyodQvDZ/xXcrzz4E9/aN0Le6Huzvf6VfgzLU3h/JKrf0PvwHBHYj5zIqyLQAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <picture>
        <source
          srcset="/static/dac04109cc5d353393b7c60dbb07c485/8ac56/principal.webp 240w,
/static/dac04109cc5d353393b7c60dbb07c485/d3be9/principal.webp 480w,
/static/dac04109cc5d353393b7c60dbb07c485/e46b2/principal.webp 960w,
/static/dac04109cc5d353393b7c60dbb07c485/65db1/principal.webp 1126w"
          sizes="(max-width: 960px) 100vw, 960px"
          type="image/webp"
        />
        <source
          srcset="/static/dac04109cc5d353393b7c60dbb07c485/8ff5a/principal.png 240w,
/static/dac04109cc5d353393b7c60dbb07c485/e85cb/principal.png 480w,
/static/dac04109cc5d353393b7c60dbb07c485/d9199/principal.png 960w,
/static/dac04109cc5d353393b7c60dbb07c485/b94e3/principal.png 1126w"
          sizes="(max-width: 960px) 100vw, 960px"
          type="image/png"
        />
        <img
          class="gatsby-resp-image-image"
          src="/static/dac04109cc5d353393b7c60dbb07c485/d9199/principal.png"
          alt="principal"
          title="principal"
          loading="lazy"
          style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        />
      </picture>
  </a>
    </span>
IAM 롤에서 Principal이라는 속성이 있는 제어 대상을 위한 정책이 있었습니다.</p>
<br>
<p>IAM 롤이 적용되는 부분이 위에서 봤던 IAM 사용자에 역할을 부여하는 부분과
<span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/7b3e55aa3992fc4d21fafded365497c1/7d62e/ec2_role.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 60.83333333333334%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAABl0lEQVQoz21Ti3LjIAz0/3/kTc9J6we1jTHgF3irhdiTtGFGAwixK62gqFSHj88K5e2Oj/8lPr8qdH2frFUq2fd3h9FMsM7BWgutR0ycx1HihjQPWsNITMHgsixxu9/RNC26rkPbtqjrGlVVy1qJr4f1C7Z9x7ZtcAK8riuc9xgGLXuPabLJX5hpQj8M8H5ODpqXwH0PcPOCGA9c48hrZkPyXQieB0kKssxyMYSQjEG0bRaCvku+Q4CyIc0slxnFGK+zC5AHLMsYI8DzxbrJoRYd43G8ZMHLi5yR6Ny/ABJIifAEXpblAgwh5osP3ZhNtiPFcP0W0FLQeYfbjj963GqFf18KqtdJFopPvzYWvV2ypH8BHbQcuk3YXzFxPOzdiG8OcslS6iCMFNpYl8pmx31qVp5PKZ4t/N6LpowvvGQ4SjedGeHFwcssj0btlmVNzM+XTz1DDE/axgxoa/kZ8qh3O72WJAGU4/db4+BbJSGJaLmCgFUSKHTTQDUKuwScXUtdFkB+sXE01+M+O0pA+/gA7vEdT/AfvxKneihnYNwAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <picture>
        <source
          srcset="/static/7b3e55aa3992fc4d21fafded365497c1/8ac56/ec2_role.webp 240w,
/static/7b3e55aa3992fc4d21fafded365497c1/d3be9/ec2_role.webp 480w,
/static/7b3e55aa3992fc4d21fafded365497c1/e46b2/ec2_role.webp 960w,
/static/7b3e55aa3992fc4d21fafded365497c1/f992d/ec2_role.webp 1440w,
/static/7b3e55aa3992fc4d21fafded365497c1/882b9/ec2_role.webp 1920w,
/static/7b3e55aa3992fc4d21fafded365497c1/cb557/ec2_role.webp 2368w"
          sizes="(max-width: 960px) 100vw, 960px"
          type="image/webp"
        />
        <source
          srcset="/static/7b3e55aa3992fc4d21fafded365497c1/8ff5a/ec2_role.png 240w,
/static/7b3e55aa3992fc4d21fafded365497c1/e85cb/ec2_role.png 480w,
/static/7b3e55aa3992fc4d21fafded365497c1/d9199/ec2_role.png 960w,
/static/7b3e55aa3992fc4d21fafded365497c1/07a9c/ec2_role.png 1440w,
/static/7b3e55aa3992fc4d21fafded365497c1/29114/ec2_role.png 1920w,
/static/7b3e55aa3992fc4d21fafded365497c1/7d62e/ec2_role.png 2368w"
          sizes="(max-width: 960px) 100vw, 960px"
          type="image/png"
        />
        <img
          class="gatsby-resp-image-image"
          src="/static/7b3e55aa3992fc4d21fafded365497c1/d9199/ec2_role.png"
          alt="ec2 role"
          title="ec2 role"
          loading="lazy"
          style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        />
      </picture>
  </a>
    </span>
EC2 인스턴스에 적용하는 두가지를 확인 했고, 방향과 관련해서 적용위치를 같이 생각하는 방향으로 일단 이해해 보았습니다.</p>
<h3 id="복수-테넌트에-대한-제어-권한" style="position:relative;"><a href="#%EB%B3%B5%EC%88%98-%ED%85%8C%EB%84%8C%ED%8A%B8%EC%97%90-%EB%8C%80%ED%95%9C-%EC%A0%9C%EC%96%B4-%EA%B6%8C%ED%95%9C" aria-label="복수 테넌트에 대한 제어 권한 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>복수 테넌트에 대한 제어 권한</h3>
<p>AWS의 테넌트는 관리자 계정 별로 존재하기 때문에 다른 어카운트의 컴포넌트를 제어할 수 없습니다.</p>
<p>그럼에도 불구하고 접근을 해야하는 경우, IAM롤에서 Principal에 접근을 허용할 테넌트의 어카운트, 혹은 계정 번호를 지정한 후, AssumeRole의 API를 실행하여 해당 테넌트로부터의 접근을 허용 할 수 있습니다.</p>
<p>이를 <strong>크로스 어카운트 접근</strong>이라고 합니다.</p>
<h3 id="페더레이션" style="position:relative;"><a href="#%ED%8E%98%EB%8D%94%EB%A0%88%EC%9D%B4%EC%85%98" aria-label="페더레이션 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>페더레이션</h3>
<p>토큰 활용 방식 중 제3의 ID에 권한을 위임하는 <strong>페더레이션</strong>이라는 방식이 있습니다.</p>
<p>사용자 인증을 제공하는 소셜 서비스들을 ID Provider라 하며, ID Provider와 또 다른 ID를 사용하는 시스템이 상호 신뢰 관계를 맺는 방법으로 통합 인증을 구현 합니다.</p>
<p>이런 통한 인증은 크게 두가지로 SAML, OIDC, WebID가 있습니다.</p>
<ul>
<li>SAML : 인증과 인가에대한 정보를 기술하는 마크업 언어로 HTTP/HTTPS를 통해 주고 받아 통합인증을 합니다.</li>
<li>OIDC : OAuth 2.0을 활용하여 웹 API를 통한 접근을 제어하는 방법입니다.</li>
</ul>
<p>AWS에서도 페더레이션을 연계해 제 3자에게 ID를 위임해줄 수 있습니다. IAM사용자를 생성해 지급하는게 아닌 <strong>IAM 자격 증명 공급자</strong>를 사용할 수 있습니다.</p>
<p>AWS 외부의 사용자 자격 증명을 관리할 수 있고 이 외부 사용자 자격 증명에 계정의 AWS 리소스에 대한 사용 권한을 부여할 수 있습니다.</p>
<p><a href="https://docs.aws.amazon.com/ko_kr/IAM/latest/UserGuide/id_roles_providers.html" target="_blank" rel="nofollow noopener noreferrer">자세한 연동 가이드</a></p>
<h4 id="참고" style="position:relative;"><a href="#%EC%B0%B8%EA%B3%A0" aria-label="참고 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>참고</h4>
<ul>
<li><a href="https://devdy.tistory.com/14" target="_blank" rel="nofollow noopener noreferrer">공개키, 대칭키</a></li>
<li><a href="https://whchoi98.gitbook.io/aws-iam/iam-role" target="_blank" rel="nofollow noopener noreferrer">AWS IAM 가이드 깃북</a></li>
</ul></div></div></div><div class="Post-module--post__footer--3WzWU"><div><p class="Meta-module--meta__date--29eD7">Published <!-- -->Sep 16, 2021</p></div><div class="Tags-module--tags--1L_ct"><ul class="Tags-module--tags__list--91FqN"><li class="Tags-module--tags__list-item--1M30P"><a class="Tags-module--tags__list-item-link--3SL_8" href="/tag/cloud/">cloud</a></li><li class="Tags-module--tags__list-item--1M30P"><a class="Tags-module--tags__list-item-link--3SL_8" href="/tag/aws/">aws</a></li></ul></div><div class="Author-module--author--2Yefr"><p><div>잘못된 정보는 퍼지지 않도록</div><div>언제든지 틀린부분은 코멘트 부탁드립니다!</div><a class="Author-module--author__bio-twitter--n-O9n" href="https://github.com/JeoungSulMo" rel="noopener noreferrer" target="_blank"><strong>Sulmo J</strong> on Github</a></p></div></div><div class="Post-module--post__comments--25y6I"><div><div id="disqus_thread"></div></div></div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/posts/cloud/2";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-c1845d93c9e04dbde99a.js"],"app":["/app-322bd83bbb4e184c49a7.js"],"component---cache-caches-gatsby-plugin-offline-app-shell-js":["/component---cache-caches-gatsby-plugin-offline-app-shell-js-241020a1cf7d0f317bbe.js"],"component---src-templates-categories-list-template-js":["/component---src-templates-categories-list-template-js-360d3be9ef560cd7196c.js"],"component---src-templates-category-template-js":["/component---src-templates-category-template-js-eebcb6df0ca6f96fe4e4.js"],"component---src-templates-index-template-js":["/component---src-templates-index-template-js-572bdb643328bfa07c54.js"],"component---src-templates-not-found-template-js":["/component---src-templates-not-found-template-js-6ed462a02510b7110382.js"],"component---src-templates-page-template-js":["/component---src-templates-page-template-js-b0975e852f1e566ce882.js"],"component---src-templates-post-template-js":["/component---src-templates-post-template-js-67a0a83dd0cc3ba6607c.js"],"component---src-templates-tag-template-js":["/component---src-templates-tag-template-js-0ee16ab9b129a97c7cd7.js"],"component---src-templates-tags-list-template-js":["/component---src-templates-tags-list-template-js-64be7b5d27c1d968e731.js"]};/*]]>*/</script><script src="/polyfill-c1845d93c9e04dbde99a.js" nomodule=""></script><script src="/component---src-templates-post-template-js-67a0a83dd0cc3ba6607c.js" async=""></script><script src="/cd95ea5cbd2c605f26db819f07999610c9ff4310-40d6230fbf0ed0654178.js" async=""></script><script src="/styles-407fe62976dc5310c43e.js" async=""></script><script src="/app-322bd83bbb4e184c49a7.js" async=""></script><script src="/532a2f07-b716085e22ead3eba281.js" async=""></script><script src="/framework-eb684e3e828ad13b3940.js" async=""></script><script src="/webpack-runtime-db149d7599a326f40917.js" async=""></script></body></html>