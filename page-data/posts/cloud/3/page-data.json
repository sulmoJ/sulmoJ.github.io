{"componentChunkName":"component---src-templates-post-template-js","path":"/posts/cloud/3","result":{"data":{"markdownRemark":{"id":"13ef238e-dd20-503e-ac25-f172bf2501be","html":"<blockquote>\n<p>이전 파트들은 항상 두장 중 한장까지만 정리되어서 블로그에 올라와있지 않습니다… 언젠가 다 정리하는걸로..</p>\n</blockquote>\n<h2 id=\"오브젝트-스토리지-리소스-제어\" style=\"position:relative;\"><a href=\"#%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8-%EC%8A%A4%ED%86%A0%EB%A6%AC%EC%A7%80-%EB%A6%AC%EC%86%8C%EC%8A%A4-%EC%A0%9C%EC%96%B4\" aria-label=\"오브젝트 스토리지 리소스 제어 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>오브젝트 스토리지 리소스 제어</h2>\n<h3 id=\"오브젝트-스토리지-리소스\" style=\"position:relative;\"><a href=\"#%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8-%EC%8A%A4%ED%86%A0%EB%A6%AC%EC%A7%80-%EB%A6%AC%EC%86%8C%EC%8A%A4\" aria-label=\"오브젝트 스토리지 리소스 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>오브젝트 스토리지 리소스</h3>\n<ul>\n<li>\n<p>블록 스토리지</p>\n<ul>\n<li>볼륨과 스냅샷으로 구분</li>\n<li>스토리지 관점에서는 블록 단위로 데이터를 인식</li>\n<li>OS관점에서는 블록 스토리지 내부 파일들을 파일 시스템상의 다른 파일들과 동일하게 인식하고 처리</li>\n<li>서버관점에서 스토리지를 디바이스로 인식하는데 주로 로컬 디스크나 DB를 사용하면서 온라인 시스텐의 정보 처리 용도로 활용</li>\n</ul>\n</li>\n<li>\n<p>네트워크 스토리지(AWS EFS)</p>\n<ul>\n<li>TCP/IP로 네트워크를 연결해 사용하는 특징이 있으며, NFS라는 프로토콜을 사용합니다. OS의 파일 시스템 관점에서는 다른 파일들과 다를 바 없이 똑같이 파일로 인식</li>\n</ul>\n</li>\n<li>\n<p>오브젝트 스토리지</p>\n<ul>\n<li>파일 단위로 데이터를 관리하고 HTTP/HTTPS 프로토콜로 데이터에 접근. 스토리지를 마운트해 사용하는 경우가 거의 없고 개별적인 파일단위로 사용</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"오브젝트-스토리지의-내부-구성과-활용-방법\" style=\"position:relative;\"><a href=\"#%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8-%EC%8A%A4%ED%86%A0%EB%A6%AC%EC%A7%80%EC%9D%98-%EB%82%B4%EB%B6%80-%EA%B5%AC%EC%84%B1%EA%B3%BC-%ED%99%9C%EC%9A%A9-%EB%B0%A9%EB%B2%95\" aria-label=\"오브젝트 스토리지의 내부 구성과 활용 방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>오브젝트 스토리지의 내부 구성과 활용 방법</h4>\n<p>오브젝트 스토리지는 HTTP/HTTPS로 파일을 제어해 내부적으로 HTTP 서버를 내장하고 있습니다. 그래서 HTTP 서버를 통해 외부에 파일 공개도 가능합니다.</p>\n<p>블록 스토리지를 활용하는 것은 우리가 HDD, SDD를 사용하는것과 같은 접근이 이뤄지는것과 비슷합니다. 웹사이트를 구축한 경우로 생각해보면 블록 스토리지는 기본적으로 외부와의 연결을 위해 서버 리소스가 필요합니다. 서버 인스턴스를 대여하고 OS에 nginx나 아파치 톰캣과 같은 소프트웨어를 설치해 포트를 통해 요청을 받아 OS의 파일시스템을 통해 블록스토리지(볼륨)에 접근하는 과정이 필요합니다.</p>\n<p>하지만 오브젝트 스토리지는 기본적으로 HTTP서버, 파일시스템, 네트워크 디바이스 접속까지 필요한 내용은 모두 포함되어있어 위와같은 설정과정이 필요 없습니다.</p>\n<p>추가적인 오브젝트 스토리지의 장점으로</p>\n<ul>\n<li>리플리케이션 기능이 있어 백업이 필요 없음.</li>\n<li>용량 산정에 크게 고민하지 않아도 됨</li>\n<li>API로 파일이 제어가능</li>\n<li>HTTP/HTTPS로 파일에 접근</li>\n</ul>\n<p>이 있습니다.</p>\n<p>(리플리케이션: 실시간 복제본 DB서버를 운용하는 것입니다. 기준이되는 서버를 master서버라 하며 쓰기기능을 수행하고, master서버와 동일한 내용을 갖는 서버를 리플리카라 부르며 읽기만 수행합니다. )</p>\n<h5 id=\"오브젝트-스토리지-활용\" style=\"position:relative;\"><a href=\"#%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8-%EC%8A%A4%ED%86%A0%EB%A6%AC%EC%A7%80-%ED%99%9C%EC%9A%A9\" aria-label=\"오브젝트 스토리지 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>오브젝트 스토리지 활용</h5>\n<ul>\n<li>정적인 웹사이트 제공</li>\n<li>용량이 큰 동영상 파일 제공</li>\n<li>빅데이터와 같은 용량이 폭발적으로 늘어나 분석이 쉽지 않은 로그파일</li>\n</ul>\n<h5 id=\"블록스터리지-활용\" style=\"position:relative;\"><a href=\"#%EB%B8%94%EB%A1%9D%EC%8A%A4%ED%84%B0%EB%A6%AC%EC%A7%80-%ED%99%9C%EC%9A%A9\" aria-label=\"블록스터리지 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>블록스터리지 활용</h5>\n<ul>\n<li>안전성 높은 입출력</li>\n<li>파일의 정합성을 위한 LOCK이 필요한 경우</li>\n</ul>\n<h3 id=\"오브젝트-스토리지-기본-api\" style=\"position:relative;\"><a href=\"#%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8-%EC%8A%A4%ED%86%A0%EB%A6%AC%EC%A7%80-%EA%B8%B0%EB%B3%B8-api\" aria-label=\"오브젝트 스토리지 기본 api permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>오브젝트 스토리지 기본 API</h3>\n<ul>\n<li>어카운트 : 테넌트에 해당, 평소엔 그닥 인지 못하는 단위이지만 크로스 어카운트시 필요</li>\n<li>버킷(컨테이너) : AWS S3로 파일 시스템과 비유시 최상위 폴더에 해당. 버킷 이름이 FQND로 공개되어 버킷 이름이 고유해야함</li>\n<li>오브젝트</li>\n<li>버킷 안에 저장되는 파일들.</li>\n<li>버킷안에 버킷을 생성하는건 불가능, 대신 폴더 경로처럼 프리픽스를 접두어로 분류 체계를 만들 수 있음</li>\n<li>프리픽스와 파일명을 포함한것을 key라고 함 (Bucket_name/Object)</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 634px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8bc26d756dc33a8abf2827cae3c7c365/374ac/s3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 112.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAYAAAALHW+jAAAACXBIWXMAABYlAAAWJQFJUiTwAAAD70lEQVQ4y01VaXMbVRDcvxu+QAUKVwFfIC5AIb6I7MjWsTpWe2jv+5BkOw78rqF7duXwoes9vaOnp2feyvh8yKQrdnJsQmlyVx7bSF6OmXw+pLrG3xyfu1jXvjxm8s9TLv8+F/IF516Oqbxw/Zjqb+NQR7I1J2Iv72Uzv5PVbCxlbEuV2OJusLYYY30sHuY760HBNe41mSNPXSSPRBvq3HjqUgkcEwfnEtimpP4G40LSYI2Lt0oWeaZ41r0ku6Ve7EoPWXlyrIOesA0HwliMIxTWmSdV6kqZOFJhfqhD2VehqqxSW7JwrQFoyfM+1oscCVrypHYksAUKK5BkgYXDntQA1VSpo54dm16Bqmj6lPbVDgH91xR55vSbig369dgmErpL+DLVVOKdKW3hqTqizk5wVGUebdQCrpGMpBoQMAoQaqqJK5yTIHQXUmJMgpXksSW+A3/duc4zkCXhRuz1RBJ/ifNbvUNf94CxrwJsrBURTHetqZIdELXFAY4kKpOt7BtfWqaM9PJ4o1kw1UO9kz2BPYM91pY7KZFKAe8USKUc0IA0iVAUoC5QuNxW0iRcaUAGISFTV0JOaiXrCYoBVeEoWYf9DAqLtFfY8TJUh7uFBjm0/qs6pq2EnFQ5fMx7Io7lgKbyVI1rT6UuXf1N0hCFo58dg3CNwbFvVKhcSWOhKoUSGp7FPfLU0kARzE/xW4MiIIl9FImqu8HXBns1BBgxGjZm4+JCiKIwcozqnpAnluxwOVRSC0G2SuzgCZYZK2zhpU0xbhSGpokDWgQcPhWD6gpcoJooWMrOmakFLAwV0cPAW8jH6/dy/usvcvfxA/pzLUbNNFgIJfuKIrWUlCQBLlPlyWOSptFKJneXcnb2k7x58428ffuDbFefxGBKWbLRiql3SY80Rm/iEuf0i5bUICMR99raU0turkby9/VIbi5/x4OYflWoqgaU+bav8tA+LAoz8JHiX6NzGf3xm9h8ADgbenO8f2KGl7YSo2ErIIV6qGDvU59WPqRND53tvVxcvJcfz36W7779Xs7fvZMC2bEoRYLiRShasADhQFYPRaFPDELC+tSTQ6Fm07FcXozk8sOf8un2Cm99ibsoXGb1YJXZjC0usjnb0gFc2bd4DR2eVBfo6zi2gTwfIrQQPr5IL/YXIDMVbQkBIG1A2ECtoe+wQWMWthJ2MLvM2TKWVjoN+2KxJSp41gyFYe+lIFSytCerEdDYD4TuZiIO0FWuWOZYFg/XYj7cyPy+Hy3zVnw8Pw8NPUW7zCdX+LtYvCr7HyG+GCA51J5+NZh+6M6AuX5oI/Rg7Jv4XK31aRVsrRBVh8oGnp1QJ8gAZ/4DPy1sgxcyjO0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/8bc26d756dc33a8abf2827cae3c7c365/8ac56/s3.webp 240w,\n/static/8bc26d756dc33a8abf2827cae3c7c365/d3be9/s3.webp 480w,\n/static/8bc26d756dc33a8abf2827cae3c7c365/14369/s3.webp 634w\"\n          sizes=\"(max-width: 634px) 100vw, 634px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/8bc26d756dc33a8abf2827cae3c7c365/8ff5a/s3.png 240w,\n/static/8bc26d756dc33a8abf2827cae3c7c365/e85cb/s3.png 480w,\n/static/8bc26d756dc33a8abf2827cae3c7c365/374ac/s3.png 634w\"\n          sizes=\"(max-width: 634px) 100vw, 634px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/8bc26d756dc33a8abf2827cae3c7c365/374ac/s3.png\"\n          alt=\"s3\"\n          title=\"s3\"\n          loading=\"lazy\"\n          style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        />\n      </picture>\n  </a>\n    </span>\n그림에서 key값에 Account에 해당하는 test가 포함되어있는데 AWS는 Account값을 뺸 경로로 사용합니다.</p>\n<h3 id=\"오브젝트-스토리지-api\" style=\"position:relative;\"><a href=\"#%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8-%EC%8A%A4%ED%86%A0%EB%A6%AC%EC%A7%80-api\" aria-label=\"오브젝트 스토리지 api permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>오브젝트 스토리지 API</h3>\n<h4 id=\"내-s3-목록-조회-및-생성\" style=\"position:relative;\"><a href=\"#%EB%82%B4-s3-%EB%AA%A9%EB%A1%9D-%EC%A1%B0%ED%9A%8C-%EB%B0%8F-%EC%83%9D%EC%84%B1\" aria-label=\"내 s3 목록 조회 및 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>내 s3 목록 조회 및 생성</h4>\n<p>오브젝트를 만드는 방식은 CLI 방식과 API 방식이 있습니다. 책에서는 오픈스택 기준으로 설명을 해 내부 작동구조나 원리 모두 오픈스택 기준의 설명입니다. <del>뭐.. 비슷하겠죠..?</del></p>\n<p>일단 AWS는 아래와 같이 생성할 수 있습니다.</p>\n<p><a href=\"https://docs.aws.amazon.com/ko_kr/cli/latest/userguide/cli-services-s3-commands.html#using-s3-commands-listing-buckets\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">공식 문서 👀</a></p>\n<p><span style=\"color:#999\">위에 링크로 들어가시면 aws cli 명령어를 알려줍니다.</span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8a3627cac23541b764d4491d07bf6e3a/e92cd/s3bucket.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 44.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABi0lEQVQoz32RS27bMBCGdYXW8UOy9UhEiZSsFy3JetiKlRbuAbIuuikKBG0XQS+QY3TXq/4dMjbgGkgXH2Yozvz6Z2gcmhLRJkcYphBRruE8BRcZWNIhKvdIt/fIZAsRS3h3EVZOANsNNY4bwD3h052RyAZtP6Jq9yiqFtv+gLqjvBzxKD/ji2D4WsQ49ntwxrGcL2Gb9isLG6bp4EaxcDChs9EPH1A2e8i6x4aQVa9Fq7rDYxLg99rCHzHDS3KLX8zCj9V7/LQn+E48r97hU+Bj4XFM5zampguj7gbtbtvdY7PdUT6g3VHefITovkEULVhc0GgMC3JgLT1YlqtR7uYkooSUQy2YyhrDeESzG5GXjY67wwi2HrHKXhBEEjzO4dNOXRbjNkxwRztW3JyEzmIqGsrR8HCkMZXD/iT4gLg4ICif4PMcni+wdJhuml0wNV+F/nEY0t+zTYM4K8HXhY6ZrGjMDqJ+QkqPdm48u7nkUkwLvlU4oSUrrpuvuf5uzCzvzeLrhv/VnfkLHoYFOUtfb90AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/8a3627cac23541b764d4491d07bf6e3a/8ac56/s3bucket.webp 240w,\n/static/8a3627cac23541b764d4491d07bf6e3a/d3be9/s3bucket.webp 480w,\n/static/8a3627cac23541b764d4491d07bf6e3a/e46b2/s3bucket.webp 960w,\n/static/8a3627cac23541b764d4491d07bf6e3a/f992d/s3bucket.webp 1440w,\n/static/8a3627cac23541b764d4491d07bf6e3a/da455/s3bucket.webp 1778w\"\n          sizes=\"(max-width: 960px) 100vw, 960px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/8a3627cac23541b764d4491d07bf6e3a/8ff5a/s3bucket.png 240w,\n/static/8a3627cac23541b764d4491d07bf6e3a/e85cb/s3bucket.png 480w,\n/static/8a3627cac23541b764d4491d07bf6e3a/d9199/s3bucket.png 960w,\n/static/8a3627cac23541b764d4491d07bf6e3a/07a9c/s3bucket.png 1440w,\n/static/8a3627cac23541b764d4491d07bf6e3a/e92cd/s3bucket.png 1778w\"\n          sizes=\"(max-width: 960px) 100vw, 960px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/8a3627cac23541b764d4491d07bf6e3a/d9199/s3bucket.png\"\n          alt=\"s3bucket\"\n          title=\"s3bucket\"\n          loading=\"lazy\"\n          style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        />\n      </picture>\n  </a>\n    </span></p>\n<p>9장에서 배운대로 IAM사용자를 생성하고 s3 버킷을 만들어 보았습니다. cli방식으로는 저런식으로 생성 해볼 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/bec268e327d15a330ad73349d76cb5b4/5b2ff/create_bucket.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 36.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABLklEQVQoz11RW04DMRDL/a/CF7fgoxIHQEIq0Hbb5j1J9lVkPFmoRD+81mQnY49jQoywziGlhNYa2tg2fkCpFfUBkXd8CPDeI5CzCIx+9vuPjpQyf0TEmKBCMQlsbgilYVkWzPP8D9pvnYdNHF4XCEVMyhkpCx3QRSkQKZ1Lka6YWGfW6kZrKdt/5UrntbJ+30HeXpCDhVG7n18H2JA4bBtySa07U1croXwfQEx018ax81gF9fUZbfcEcQOMZiNdUXrzOE1oExvn5b6mXlxvN6zr2vG38tLFWANo30Dkpmakkq7rmdfEIfo4jo+k5yqgl/QBHLNS1nVnnmVG5X3Y+iRjGrfIjPzmdHIJkayPcTieMJwvOBOZqpqzxqLnx9PQY9FML9crrHXsPfce3fQHHL4ZBgC/c34AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/bec268e327d15a330ad73349d76cb5b4/8ac56/create_bucket.webp 240w,\n/static/bec268e327d15a330ad73349d76cb5b4/d3be9/create_bucket.webp 480w,\n/static/bec268e327d15a330ad73349d76cb5b4/e46b2/create_bucket.webp 960w,\n/static/bec268e327d15a330ad73349d76cb5b4/f992d/create_bucket.webp 1440w,\n/static/bec268e327d15a330ad73349d76cb5b4/882b9/create_bucket.webp 1920w,\n/static/bec268e327d15a330ad73349d76cb5b4/94170/create_bucket.webp 2190w\"\n          sizes=\"(max-width: 960px) 100vw, 960px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/bec268e327d15a330ad73349d76cb5b4/8ff5a/create_bucket.png 240w,\n/static/bec268e327d15a330ad73349d76cb5b4/e85cb/create_bucket.png 480w,\n/static/bec268e327d15a330ad73349d76cb5b4/d9199/create_bucket.png 960w,\n/static/bec268e327d15a330ad73349d76cb5b4/07a9c/create_bucket.png 1440w,\n/static/bec268e327d15a330ad73349d76cb5b4/29114/create_bucket.png 1920w,\n/static/bec268e327d15a330ad73349d76cb5b4/5b2ff/create_bucket.png 2190w\"\n          sizes=\"(max-width: 960px) 100vw, 960px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/bec268e327d15a330ad73349d76cb5b4/d9199/create_bucket.png\"\n          alt=\"create bucket\"\n          title=\"create bucket\"\n          loading=\"lazy\"\n          style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        />\n      </picture>\n  </a>\n    </span></p>\n<p>AWS console에서도 확인이 가능합니다.</p>\n<p>내부동작은 오픈스택기준 설명을 보았을 때 저렇게 작성한 정보들(access key ID, secret Access key)을 https 요청으로 헤더와 url에 정보를 담아 요청시 AWS측에서 생성해 주는것 같습니다.</p>\n<p>오픈스택기준 설명에서 특이한 점은 생성인데 PUT요청을 사용해 버킷을 생성하는데, Account기준으로 보았을 때 트리구조로 이루어져 컨테이너나 오브젝트가 생성이 아닌 추가 되는걸로 보이기 때문이라고 합니다.</p>\n<p>이후 <a href=\"https://docs.aws.amazon.com/ko_kr/AmazonS3/latest/API/API_CreateBucket.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">문서</a>를 찾았는데 AWS 버킷 생성은</p>\n<div class=\"gatsby-highlight\" data-language=\"http\"><pre class=\"language-http\"><code class=\"language-http\">PUT / HTTP/1.1\n<span class=\"token header-name keyword\">Host:</span> Bucket.s3.amazonaws.com\n<span class=\"token header-name keyword\">x-amz-acl:</span> ACL\n<span class=\"token header-name keyword\">x-amz-grant-full-control:</span> GrantFullControl\n<span class=\"token header-name keyword\">x-amz-grant-read:</span> GrantRead\n<span class=\"token header-name keyword\">x-amz-grant-read-acp:</span> GrantReadACP\n<span class=\"token header-name keyword\">x-amz-grant-write:</span> GrantWrite\n<span class=\"token header-name keyword\">x-amz-grant-write-acp:</span> GrantWriteACP\n<span class=\"token header-name keyword\">x-amz-bucket-object-lock-enabled:</span> ObjectLockEnabledForBucket\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?>\n&lt;CreateBucketConfiguration xmlns=\"http://s3.amazonaws.com/doc/2006-03-01/\">\n   &lt;LocationConstraint>string&lt;/LocationConstraint>\n&lt;/CreateBucketConfiguration></code></pre></div>\n<p>이러한 구조로 권한 설정과 ACL설정 등 설정 옵션과 함께 문서에 작성되어 있습니다.</p>\n<h4 id=\"멀티파트-업로드하기\" style=\"position:relative;\"><a href=\"#%EB%A9%80%ED%8B%B0%ED%8C%8C%ED%8A%B8-%EC%97%85%EB%A1%9C%EB%93%9C%ED%95%98%EA%B8%B0\" aria-label=\"멀티파트 업로드하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>멀티파트 업로드하기</h4>\n<p>업로드할 오브젝트의 크기가 크면 파일을 분할해 병렬적으로 업로드 처리를 하는 멀티파트 업로드라는 기능이 있습니다.</p>\n<p>크게 3단게로 작동하는데</p>\n<ol>\n<li>오브젝트를 분할해서 파트를 생성</li>\n<li>생성된 파트를 업로드</li>\n<li>파트를 결합해 원래 오브젝트를 생성</li>\n</ol>\n<p>이렇게 3가지 단계의 API로 AWS는 구현이 되어있고, 오픈스택은 한번에 처리하는 API가 있습니다.</p>\n<p>3가지 단계를 작업하는데 멀티파트업로드의 추가적인 API가 궁굼하시다면 <a href=\"https://docs.aws.amazon.com/ko_kr/AmazonS3/latest/userguide/mpuoverview.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">여기로</a></p>\n<h4 id=\"aws-s3-cli\" style=\"position:relative;\"><a href=\"#aws-s3-cli\" aria-label=\"aws s3 cli permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>AWS S3 CLI</h4>\n<p>위에서 버킷 생성하는 부분을 AWS CLI통해 잠깐 보았습니다. 이러한 AWS CLI는 명령을 통해 여러 API를 조합해 기능단위로 사용하기 편합니다.</p>\n<p>AWS CLI를 통해 유닉스나 리눅스의 명령 처럼 ls mv같은 파일리스트나 이동을 이해하기 쉽게 사용할 수 있습니다. 다만 sync 명령은 리눅스에서 메모리의 데이터를 디스크로 저장하는데 s3는 인수에 동기화할 원본 경로와 동기화할 대상 경로를 지정하면 그 경로 아래 모든 오브젝트를 동기화 하는 기능임으로 차이도 있으니 주의해야 합니다.</p>\n<p>위에서본 Multipart Upload와 같이 대용량 파일을 업로드하는 방식이 있는데 CLI를 이용시 일정 기준이상 자동으로 사용해 줍니다. 직접 API를 골라 사용하지 않고도 쉽게 이러한 기능들을 사용할 수 있도록 돕습니다.</p>\n<h3 id=\"오브젝트-스토리지의-설정-변경을-위한-api\" style=\"position:relative;\"><a href=\"#%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8-%EC%8A%A4%ED%86%A0%EB%A6%AC%EC%A7%80%EC%9D%98-%EC%84%A4%EC%A0%95-%EB%B3%80%EA%B2%BD%EC%9D%84-%EC%9C%84%ED%95%9C-api\" aria-label=\"오브젝트 스토리지의 설정 변경을 위한 api permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>오브젝트 스토리지의 설정 변경을 위한 API</h3>\n<h4 id=\"acl-기능\" style=\"position:relative;\"><a href=\"#acl-%EA%B8%B0%EB%8A%A5\" aria-label=\"acl 기능 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ACL 기능</h4>\n<blockquote>\n<p>버킷, 오브젝트, 모드를 대상으로 접근 제어를 할 수 있는 기능입니다.</p>\n</blockquote>\n<p>9장에서 본 사용자를 대상으로 이들을 <strong>오브젝트 스토리지 그룹</strong>에 포함시켜 권한을 부여합니다.</p>\n<p>그룹은 총 3가지가 존재합니다.</p>\n<ul>\n<li>Authenticated User : 인증이 필요하고 인증 후에는 관리 권한을 가진 그룹</li>\n<li>Everyone : 인증이 필요없고 일반적인 접근이 허용되는 그룹</li>\n<li>Log delivery: 로그를 관리하는 사용자들 그룹</li>\n</ul>\n<h4 id=\"버저닝과-수명주기\" style=\"position:relative;\"><a href=\"#%EB%B2%84%EC%A0%80%EB%8B%9D%EA%B3%BC-%EC%88%98%EB%AA%85%EC%A3%BC%EA%B8%B0\" aria-label=\"버저닝과 수명주기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>버저닝과 수명주기</h4>\n<h5 id=\"버저닝\" style=\"position:relative;\"><a href=\"#%EB%B2%84%EC%A0%80%EB%8B%9D\" aria-label=\"버저닝 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>버저닝</h5>\n<blockquote>\n<p>한 오브젝트가 변경될 때마다 그 사실을 이력으로 남겨 여러 버전을 보관하는 기능</p>\n</blockquote>\n<p>기본적으로 버저닝 기능이 활성화 되어있으면 조회시 가장 최신 버전의 오브젝트를 반환해줍니다. 삭제에 있어서도 이전 버전 ID를 명시적으로 말해주지 않는이상 최신 버전만 삭제되고 이전 오브젝트가 다 남아있습니다.</p>\n<h5 id=\"수명-주기\" style=\"position:relative;\"><a href=\"#%EC%88%98%EB%AA%85-%EC%A3%BC%EA%B8%B0\" aria-label=\"수명 주기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>수명 주기</h5>\n<p><a href=\"https://docs.aws.amazon.com/ko_kr/AmazonS3/latest/API/API_PutBucketLifecycleConfiguration.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">공식문서</a></p>\n<blockquote>\n<p>일정 기간 후에 오브젝트를 물리적으로 삭제하도록 규칙을 정할 수 있는 기능</p>\n</blockquote>\n<p>버저닝과 조합하면 버저닝의 이력 기간을 제어할수 있습니다.</p>\n<ul>\n<li>오브젝트의 생성 일자 기준 며칠 후</li>\n<li>해당 오브젝트가 최신 버전이 되거나 최신 버전이 아니게 된지 몇칠 후</li>\n<li>등등</li>\n</ul>\n<p>이런식으로 다양하게 구성 가능합니다.</p>\n<h4 id=\"암호화\" style=\"position:relative;\"><a href=\"#%EC%95%94%ED%98%B8%ED%99%94\" aria-label=\"암호화 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>암호화</h4>\n<p>민감한 정보가 저장되는 경우 암호화가 필요합니다. S3는 2가지 방식을 제공합니다.</p>\n<h5 id=\"서버측-암호화\" style=\"position:relative;\"><a href=\"#%EC%84%9C%EB%B2%84%EC%B8%A1-%EC%95%94%ED%98%B8%ED%99%94\" aria-label=\"서버측 암호화 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>서버측 암호화</h5>\n<ul>\n<li>버킷 전체에 암호화를 적용하는 방법</li>\n<li>버킷에 저장할 때 암호화, 조회시 복호화</li>\n<li>접근 권한과 키정보만 있으면 조회 가능</li>\n</ul>\n<h5 id=\"클라이언트-측-암호화\" style=\"position:relative;\"><a href=\"#%ED%81%B4%EB%9D%BC%EC%9D%B4%EC%96%B8%ED%8A%B8-%EC%B8%A1-%EC%95%94%ED%98%B8%ED%99%94\" aria-label=\"클라이언트 측 암호화 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>클라이언트 측 암호화</h5>\n<ul>\n<li>클라이언트가 오브젝트를 암호화 후 업로드</li>\n<li>암호화 키는 클라우드 안에서 메타 데이터로 관리</li>\n<li>다운로드 이후에도 복호화 하지않으면 정보를 볼 수 없음</li>\n<li>클라우드에 의존하지 않는 방식의 암호화</li>\n</ul>\n<h4 id=\"웹-사이트-기능\" style=\"position:relative;\"><a href=\"#%EC%9B%B9-%EC%82%AC%EC%9D%B4%ED%8A%B8-%EA%B8%B0%EB%8A%A5\" aria-label=\"웹 사이트 기능 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>웹 사이트 기능</h4>\n<p>앞서 말한것 처럼 HTTP/HTTPS서버가 내장되어있어 접근시 웹서버를 띄울 수 있다.</p>\n<p>기능을 활성화하지 않고 접근 권한만 공개시 <code class=\"language-text\">https://{bucket_name}s3.amazonaws.com/index.html</code>이런식으로 경로가 다 작성되야 합니다.</p>\n<p>권한을 활성화시 도큐먼트 루트나 커스텀 에러, 그리고 리다이렉트와 같은 기본적인 웹 서버의 기능들을 지원합니다.</p>\n<p>도큐먼트 루트로 리다이렉트 됨으로 오브젝트 경로는 빠질 수 있으며 에러페이지 또한 aws기본제공화면이 아닌 커스텀된 에러페이지를 보여줄 수 있다.</p>\n<h5 id=\"cors\" style=\"position:relative;\"><a href=\"#cors\" aria-label=\"cors permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CORS</h5>\n<p>보안상 XMLHttpRequest가 서로 다른 도메인을 넘나들 때 보안상 접근이 제한되는 제약 이 있습니다.</p>\n<p>이렇게 외부 도메인의 웹사이트에서 접근을 시도하면 동일 출처 정책에 걸리게 되는걸 막기위해 S3는 API 바디에 CORS를 위한 설정을 추가해 허용해줄 수 있습니다.</p>\n<p>버킷에 허용할 도메인을 걸어주면 HTTP헤더를 통해 보안검사를 통과하게 됩니다.</p>\n<p>pre-flight와 같은 사전검사요청은 브라우저 지원마다 좌우 될 수 있다고 합니다.</p>\n<h3 id=\"오브젝트와-api의-관계\" style=\"position:relative;\"><a href=\"#%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8%EC%99%80-api%EC%9D%98-%EA%B4%80%EA%B3%84\" aria-label=\"오브젝트와 api의 관계 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>오브젝트와 API의 관계</h3>\n<h4 id=\"정합성과-최종-정합성\" style=\"position:relative;\"><a href=\"#%EC%A0%95%ED%95%A9%EC%84%B1%EA%B3%BC-%EC%B5%9C%EC%A2%85-%EC%A0%95%ED%95%A9%EC%84%B1\" aria-label=\"정합성과 최종 정합성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>정합성과 최종 정합성</h4>\n<p><strong>정합성</strong> : 오브젝트의 상태가 확정되면 그 상태를 확인할 때 모순 없이 현재 상태 그대로가 재확인되는 특성</p>\n<p>이러한 특성이 오브젝트 스토리지에서는 새로 만드는 신규 생성 시에만 적용 됩니다.</p>\n<p><strong>최종 정합성</strong> : 분산 환경에서 나타나는 특성으로 오브젝트의 상태가 확정되더라도 그 상태를 확인하는 시기에 따라 현재 상태가 아닌 이전 상태가 확인될 수 있다는 특성</p>\n<p>파일을 변경할 때, 타임스탬프가 클라이언트에서 실행될 때가 아닌 서버에 요청이 도착한 시간대를 말합니다. 그래서 기존 오브젝트가 두번 변경 요청시 첫 요청이 네트워크 지연으로 늦게도착하면 결과적으로 두번째 요청이 될수 있습니다.</p>\n<p>변경 작업을 위한 락 처리가 불가능하기 때문에 나타나는 현상입니다.</p>\n<h4 id=\"etag를-사용한-오브젝트-확인\" style=\"position:relative;\"><a href=\"#etag%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%9C-%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8-%ED%99%95%EC%9D%B8\" aria-label=\"etag를 사용한 오브젝트 확인 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Etag를 사용한 오브젝트 확인</h4>\n<p>오브젝트가 제대로 저장되었는지 확인하기위해 HTTP 헤더에 Etag를 활용합니다.</p>\n<p>Etag는 기존 캐쉬된 정보가 변화가 있는지에대해 알아보고 그에 따른 설정을 해줄수 있도록 돕습니다. 우리는 이러한 Etag를 응답 헤더에 포함되어 있으면 파일이 정상적으로 반영 되었음을 확인합니다.</p>\n<p>암호화 방식을 자체적으로 커스텀했다면 해시 이외의 다른 알고리즘이 사용되었을 수 있어 주의하고, 멀티파트 기능을 활용했다면 각 파트 오브젝트마다 따로 확인을 해줘야하는 등의 추가적인 처리가 생깁니다.</p>\n<h4 id=\"reatful-api와-관계\" style=\"position:relative;\"><a href=\"#reatful-api%EC%99%80-%EA%B4%80%EA%B3%84\" aria-label=\"reatful api와 관계 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reatful API와 관계</h4>\n<p>3장에서 Restful API 4가지 설계지침</p>\n<ul>\n<li>상태를 가지지 않는다</li>\n<li>URI는 디렉터리 구조처럼 계층적으로 만든다</li>\n<li>HTTP 메소드를 명시적으로 사용한다</li>\n<li>응답 할때 XML이나 JSON을 사용한다</li>\n</ul>\n<p>중 마지막 응답 형식에 대해 다소 만족시키지 못해 다른 컴포넌트들과의 연계가 부족합니다. 그래서 Amazon S3는 <a href=\"https://docs.aws.amazon.com/ko_kr/AmazonS3/latest/userguide/NotificationHowTo.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">이벤트 통보</a> 기능을 사용해 다른 컴포넌트간의 연계와 접속성을 보완합니다.</p>\n<h3 id=\"오브젝트-스토리지-내부구성\" style=\"position:relative;\"><a href=\"#%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8-%EC%8A%A4%ED%86%A0%EB%A6%AC%EC%A7%80-%EB%82%B4%EB%B6%80%EA%B5%AC%EC%84%B1\" aria-label=\"오브젝트 스토리지 내부구성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>오브젝트 스토리지 내부구성</h3>\n<p>오픈스택 Swift를 예로 들어 설명합니다.</p>\n<p>Swift는 일단 두가지 영역으로 나뉩니다.</p>\n<ol>\n<li>프론트 : HTTP 요청을 접수하는 액세스 티어</li>\n<li>백엔드 : 오브젝트를 데이터로 저장하는 스토리지 노드</li>\n</ol>\n<p>이렇게 나눠 설명합니다.</p>\n<h4 id=\"액세스-티어-아키텍처프론트\" style=\"position:relative;\"><a href=\"#%EC%95%A1%EC%84%B8%EC%8A%A4-%ED%8B%B0%EC%96%B4-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98%ED%94%84%EB%A1%A0%ED%8A%B8\" aria-label=\"액세스 티어 아키텍처프론트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>액세스 티어 아키텍처(프론트)</h4>\n<p>아래와 같은 처리를 합니다.</p>\n<ul>\n<li>HTTP 통신을 하기때문에 로드밸런서와 HTTP프록시가 구성되있습니다.</li>\n<li>HTTPS를 위한 SSL처리</li>\n<li>HTTP에러전달(인증실패, 요청이 너무많이 들어와 상한 값 초과,요청한 오브젝트가 없음)</li>\n</ul>\n<p>백엔드 스토리지 노드에대한 접근 제어 설정을 Ring이라고하며 프록시 노드에서 설정된다고 합니다.</p>\n<p>스토리지에 저장된 엔티티의 이름과 실제 물리적인 저장 위치를 연결 합니다. 이러한 Ring은 핵심 컴포넌트로 스토리지 노드에 대한 복제개수, 파티션, 디스크정보가 설정됩니다.</p>\n<h4 id=\"스토리지-노드의-아키텍처\" style=\"position:relative;\"><a href=\"#%EC%8A%A4%ED%86%A0%EB%A6%AC%EC%A7%80-%EB%85%B8%EB%93%9C%EC%9D%98-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98\" aria-label=\"스토리지 노드의 아키텍처 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>스토리지 노드의 아키텍처</h4>\n<p>스토리지 노드군을 존 이라고 하며, 내구성을 높이기 위해 존들을 물리적으로 분리시켜 놓습니다. 오브젝트가 저장될 때 Ring에 설정된 리플리카 정보에 따라 분산 배치할 존이 정해집니다.</p>\n<p>리플리케이션을 할 때 두단계로 <strong>확인</strong>과 <strong>복사</strong>단계로 처리합니다. 내부적으로 <strong>리플리케이터</strong>라는 파일 동기 프로세스가 이런 작업을 수행합니다.</p>\n<h5 id=\"확인\" style=\"position:relative;\"><a href=\"#%ED%99%95%EC%9D%B8\" aria-label=\"확인 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>확인</h5>\n<p>리플리케이터가 주기적으로 파일의 복사본이 Ring의 설정한 존에 제대로 들어갔는지 정기적으로 파티션을 확인합니다. 이때 <u>해시와 타임스탬프로 정보를 비교</u>하는데 존과 존사이는 TCP통신을 하며 <u>오브젝트 자체를 비교하면 용량이 클시 오버헤드가 심해</u>집니다. 그래서 직접 파일을 비교하지 않고 메타데이터인 해시와 타임스탬프를 비교합니다.</p>\n<h5 id=\"복사\" style=\"position:relative;\"><a href=\"#%EB%B3%B5%EC%82%AC\" aria-label=\"복사 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>복사</h5>\n<p>Ring 설정에서 파티션은 분산하여 저장할 곳의 크기를 결정합니다. 파티션 개수가 많을 수록 실제 저장될 존이 어느 한쪽으로 몰리는 편중 현상이 줄어듭니다.</p>\n<h4 id=\"읽기-쓰기\" style=\"position:relative;\"><a href=\"#%EC%9D%BD%EA%B8%B0-%EC%93%B0%EA%B8%B0\" aria-label=\"읽기 쓰기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>읽기 쓰기</h4>\n<p>읽기 : GET 요청이 실행 되는데 분산된 존 중 한곳에서 오브젝트를 읽어옵니다. 같은 요청이 여러 번 들어오면 다른 존의 파일을 가져가도록 분산된다는 말입니다.</p>\n<p>쓰기 : POST나 PUT요청으로 부하분산 후 결정된 한 존에 오브젝트를 생성하거나 변경합니다. 변경 완료 후 Ring에 설정된 다른 존에 이 파일을 리플리케이션 합니다.</p>\n<p>동작방식을 보았을 때 Read를 할 때 Ring에 설정된 존에만 접근하면 되고, Write는 변경 후 리프리케이션을 위한 저장과정 까지를 위해 Ring에 설정된 레플리카 전체에 접근해야 하기 때문에 HTTP 프록시에 병목만 없다면 Read를 Write보다 많이 처리 가능합니다.</p>\n<h4 id=\"분산-리플리케이션과-최종-정합성의-관계\" style=\"position:relative;\"><a href=\"#%EB%B6%84%EC%82%B0-%EB%A6%AC%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98%EA%B3%BC-%EC%B5%9C%EC%A2%85-%EC%A0%95%ED%95%A9%EC%84%B1%EC%9D%98-%EA%B4%80%EA%B3%84\" aria-label=\"분산 리플리케이션과 최종 정합성의 관계 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>분산 리플리케이션과 최종 정합성의 관계</h4>\n<p>위에서 보았던 읽기 쓰기의 동작과정이 최종 정합성과 관계가 있습니다.</p>\n<p>읽기는 단순히 지정된 위치의 레플리중 접근해 오브젝트를 가져가면되지만 쓰기는 수정후 저장까지 처리과정이 길어집니다. 수정이 요청이 들어와 마스터는 수정이 되었지만 리플리케이션이 진행되지 않은 스토리지 노드에서 데이터를 GET할수도 있습니다.</p>\n<h4 id=\"파티션과-타임-스탬프의-관계\" style=\"position:relative;\"><a href=\"#%ED%8C%8C%ED%8B%B0%EC%85%98%EA%B3%BC-%ED%83%80%EC%9E%84-%EC%8A%A4%ED%83%AC%ED%94%84%EC%9D%98-%EA%B4%80%EA%B3%84\" aria-label=\"파티션과 타임 스탬프의 관계 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>파티션과 타임 스탬프의 관계</h4>\n<p>파티션과 존을 매핑할 때 해시 알고리즘을 사용합니다. 해시 값은 내부적으로 오브젝트 키 이름을 사용합니다. 키이름이 바뀌지 않는 경우 PUT 요청이 실행되더라도 해시 값이 안바뀌고 타임스탬프정보로만 비교합니다.</p>\n<h4 id=\"프리픽스와-분산의-관계\" style=\"position:relative;\"><a href=\"#%ED%94%84%EB%A6%AC%ED%94%BD%EC%8A%A4%EC%99%80-%EB%B6%84%EC%82%B0%EC%9D%98-%EA%B4%80%EA%B3%84\" aria-label=\"프리픽스와 분산의 관계 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>프리픽스와 분산의 관계</h4>\n<p>해시 값을 산출할 때는 파티션 정보를 사용하는데 그 정보에는 프리픽스가 포함되어 프리픽스를 잘 설계하는것이 균일하게 분산하는 중요한 요소가 됩니다.</p>\n<p>Amazon S3에서는 오브젝트 스토리지 입출력 성능향상을 위해 프리픽스의 첫 문자에서 3~4번째까지 16진수로 1에서 f까지 순차적으로 부여해 모든 존으로 분산 시킵니다.</p>\n<h3 id=\"10장-끝\" style=\"position:relative;\"><a href=\"#10%EC%9E%A5-%EB%81%9D\" aria-label=\"10장 끝 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>10장 끝.</h3>\n<p>모든 개념을 완벽하게 이해하지는 못한 것 같습니다. 분명히 틀린 부분도 있을 것 같은데 혹시 발견하신 분이 있다면 코멘트 부탁드립니다..!</p>","fields":{"slug":"/posts/cloud/3","tagSlugs":["/tag/cloud/","/tag/aws/"]},"frontmatter":{"date":"2021-09-22T00:00:00","description":"ausg 5기 클라우드-테라폼 스터디 중 '그림으로 배우는 클라우드 인프라와 API구조'라는 책의 10장 정리입니다.","tags":["cloud","aws"],"title":"그림으로 배우는 클라우드 인프라와 API구조 10장","socialImage":{"publicURL":"/static/624cc4a835e68430a8beec01cef8ac6c/photo.jpg"}}}},"pageContext":{"slug":"/posts/cloud/3"}},"staticQueryHashes":["251939775","401334301","825871152"]}