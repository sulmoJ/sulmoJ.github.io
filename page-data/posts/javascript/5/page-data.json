{"componentChunkName":"component---src-templates-post-template-js","path":"/posts/javascript/5","result":{"data":{"markdownRemark":{"id":"76e3f4bb-1b18-5feb-ba0f-55bdb419d257","html":"<p>이번 시도에서 자바스크립트의 동기/비동기 처리를 마무리 할수 있을지 모르겠지만 시도합니다.</p>\n<h3 id=\"callback-함수\" style=\"position:relative;\"><a href=\"#callback-%ED%95%A8%EC%88%98\" aria-label=\"callback 함수 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>callback 함수</h3>\n<blockquote>\n<p>자바스크립트에서 비동기처리를 위한 매커니즘으로, 다른 코드(함수 또는 메서드)에 인자로 넘겨줌으로써 그 제어권도 함께 위임한 함수</p>\n</blockquote>\n<p>자바스크립트의 대표적 내장 <strong>비동기</strong>함수인 <code class=\"language-text\">setTimeout()</code>을 보면</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\tconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'helloWorld'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>인자로 아래 함수를 넘겨주며, 시간이 지나는 프로세스를 끝내고 실행시켜줍니다. </p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\tconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'helloWorld'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>이렇게 기본적으로 단일 쓰레드를 가져 동기적으로 작동하는 Javascript에게 비동기적 처리를 위해 콜백함수라는 개념으로 비동기 처리를 해왔습니다. </p>\n<p><span style=\"color:#999\"> 단일 스레드인 자바스크립트를 비동기적으로 작동하기 위해 브라우저에서는 우리에게 웹 API를 제공하고, 노드 환경에서는 노드에서 사용할 수 있는 다른 API가 제공됩니다.</span></p>\n<h3 id=\"promise\" style=\"position:relative;\"><a href=\"#promise\" aria-label=\"promise permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Promise</h3>\n<p>이렇게 성능향상을 위해 비동기적으로 처리가 가능하게 되었으나 문제가 하나 있습니다. 코드따라 진행되는 순서가 아닌 여기저기 마음대로 순서가 바뀌어 <strong>가독성이 떨어지고</strong>, <strong>api call</strong>과 같이 일부 <u>동기적으로 실행이 필요</u>할 때, 연속적으로 콜백함수를 작성하다보면 콜백지옥과 같은 문제가 발생합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 721px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ae2fd8a0a7aad885f69742ad4a656f79/2fa75/callbackhell.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAEDBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAeZnIAf/xAAWEAEBAQAAAAAAAAAAAAAAAAABESD/2gAIAQEAAQUCSa//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAWEAEBAQAAAAAAAAAAAAAAAAARASD/2gAIAQEABj8CKa//xAAZEAACAwEAAAAAAAAAAAAAAAABEAARUWH/2gAIAQEAAT8h1rhhpF//2gAMAwEAAgADAAAAENPP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGhAAAQUBAAAAAAAAAAAAAAAAAQAQESExgf/aAAgBAQABPxDawVpCGNEcYiTZx//Z'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/ae2fd8a0a7aad885f69742ad4a656f79/8ac56/callbackhell.webp 240w,\n/static/ae2fd8a0a7aad885f69742ad4a656f79/d3be9/callbackhell.webp 480w,\n/static/ae2fd8a0a7aad885f69742ad4a656f79/c71bf/callbackhell.webp 721w\"\n          sizes=\"(max-width: 721px) 100vw, 721px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/ae2fd8a0a7aad885f69742ad4a656f79/09b79/callbackhell.jpg 240w,\n/static/ae2fd8a0a7aad885f69742ad4a656f79/7cc5e/callbackhell.jpg 480w,\n/static/ae2fd8a0a7aad885f69742ad4a656f79/2fa75/callbackhell.jpg 721w\"\n          sizes=\"(max-width: 721px) 100vw, 721px\"\n          type=\"image/jpeg\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/ae2fd8a0a7aad885f69742ad4a656f79/2fa75/callbackhell.jpg\"\n          alt=\"그 유명한 짤\"\n          title=\"그 유명한 짤\"\n          loading=\"lazy\"\n          style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        />\n      </picture>\n  </a>\n    </span></p>\n<p>콜백지옥의 예</p>\n<p>이러한 문제를 해결하기위해 Promise객체가 등장했습니다.</p>\n<blockquote>\n<p>Promise는 현재에는 당장 얻을 수는 없지만 가까운 미래에는 얻을 수 있는 어떤 데이터에 접근하기 위한 방법을 제공하는 객체</p>\n</blockquote>\n<p>문자로 정의하면 이렇게 되는데, 정리하면 </p>\n<blockquote>\n<p><u>비동기 처리의 결과 값을 나타내는 객체</u>, 단 해당 함수에서 처리를 <strong>성공했을때</strong>와 <strong>실패했을때</strong> 아직 <strong>결과가 나오지 않았을때</strong>의 상태를 가지는</p>\n</blockquote>\n<p>가 됩니다.</p>\n<p>프로미스는 세가지 상태가 있습니다.</p>\n<ul>\n<li>대기(pending): 이행하거나 거부되지 않은 초기 상태</li>\n<li>이행(fulfilled): 연산이 성공적으로 완료됨</li>\n<li>거부(rejected): 연산이 실패함</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 862px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/141fd99656ae3f0e78352d0e737021f1/f0551/promise.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 39.583333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAAB50lEQVQoz2NgIAC+3Cvr+v6w+Nun25lv/zxKO///TYoASPzZ+WhGrBp6Pv5nrv/wn/n///8MJsocYLHtq3I5pnaFiOzfkMH3/305//fbQdxfb3hwfbrizHV4hz9j25f/TB3f/zNzTvjH8P9pHuPPJ5UsLy9nsvx9ksWCYriTgxoPiH5/q6Tx/c38O2+vp134fDt5Y0qUGgcDsaDg4KuZKXtf9vvMPswH5DKDxN5cTRD+fi9e4f3VEPlP1wNkTm31ZJKWl2JnYmDgdMmo5Co48KIhfc+zOTzr//P/f5xr+vNJ1SygC/v+Ps2ewJBz+H1n/L53DVb1CwWBZrGCDHxxrUHw2ZVqmccXiqTf3SyUWDLVl1leUYJblJGBzTapmDtr/6vSpH2vu1gm/hf6eiXe9NeT4kmvryS3/32c3IniWi93LW4Q/eF2ccfzi1nPH55OuPfuWvyeIGcGNqK9nLXvBXPUlgfMncBIAQFGdjkwDeWy/H9Vx/3//0zh//+nCP1/Wyu4b2sWY/S2N8xJO+6zsHd9Znh7NhYYKSUszy4kMf99nMLMkH78O0MLUDcTJw+KRcBYByeLj3dKu77cLfz45mraix/3U079/5LBDxL/8SSLkWHzf4b/rxIY/j7NYfj/JJnh/+NoBgDLCeMiQnT4JQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/141fd99656ae3f0e78352d0e737021f1/8ac56/promise.webp 240w,\n/static/141fd99656ae3f0e78352d0e737021f1/d3be9/promise.webp 480w,\n/static/141fd99656ae3f0e78352d0e737021f1/e32b8/promise.webp 862w\"\n          sizes=\"(max-width: 862px) 100vw, 862px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/141fd99656ae3f0e78352d0e737021f1/8ff5a/promise.png 240w,\n/static/141fd99656ae3f0e78352d0e737021f1/e85cb/promise.png 480w,\n/static/141fd99656ae3f0e78352d0e737021f1/f0551/promise.png 862w\"\n          sizes=\"(max-width: 862px) 100vw, 862px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/141fd99656ae3f0e78352d0e737021f1/f0551/promise.png\"\n          alt=\"state\"\n          title=\"state\"\n          loading=\"lazy\"\n          style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        />\n      </picture>\n  </a>\n    </span></p>\n<p>처음 비동기와 동기에대한 개념도없이 axios를 통해 api를 호출했을 때, Promise 객체에 <code class=\"language-text\">&lt;pending&gt;</code>이라는 결과 받았었고 이는 아직 요청에대한 결과가 나오지 않은 상태를 말합니다.</p>\n<p>아래 예시는 성공 또는 실패 했을때의 결과를 콘솔로 찍은 것입니다.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/874591c6e4e04d200f8cf829352b28b8/d9b5d/promise_state.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37.916666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABaklEQVQoz4WReW8TMRTE9/t/EP4BVUUVaiDpXVBBEPWgalMlbUnW3s1md7P34T1+2G0FSFXEk57Gtux5M2PLXXrMFzZCSmwhKYqCpmlolKItS1qzN+uup+//35YfBEjHJVrHhNEa11tiS0GR57RxTLMOSZOcvO4x1T/DxrL6riV9CIkmPtHUx73RaidzspWHch1Ke04dRy9kf5VsJFRaVfTlO6vPY/zTMem3n1Q3d9TX56gfX1HjMyiyVw83WnaXSxa2jUHpOOTaqlI1qq6pqpJS5xhr65XGqqq0/YRa4yZSK9EXhBAIWzCdTbm4uuR2csvsfsYvJyCIc1bafpZlT8MCnbn5uD+EBl/6yXLXthReTipTEjfGm2ulj5IyS+nSjFYPpO9eh2XOTJb/tCG16sk14fYA790Q7+0ngq09otEhq4NdgsE2i6032IP3JGdHBCdD5OiDzvwA/3iIGO7g7u/iHX4kPB1BlvAb76Bgk58qYXoAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/874591c6e4e04d200f8cf829352b28b8/8ac56/promise_state.webp 240w,\n/static/874591c6e4e04d200f8cf829352b28b8/d3be9/promise_state.webp 480w,\n/static/874591c6e4e04d200f8cf829352b28b8/e46b2/promise_state.webp 960w,\n/static/874591c6e4e04d200f8cf829352b28b8/caef1/promise_state.webp 1224w\"\n          sizes=\"(max-width: 960px) 100vw, 960px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/874591c6e4e04d200f8cf829352b28b8/8ff5a/promise_state.png 240w,\n/static/874591c6e4e04d200f8cf829352b28b8/e85cb/promise_state.png 480w,\n/static/874591c6e4e04d200f8cf829352b28b8/d9199/promise_state.png 960w,\n/static/874591c6e4e04d200f8cf829352b28b8/d9b5d/promise_state.png 1224w\"\n          sizes=\"(max-width: 960px) 100vw, 960px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/874591c6e4e04d200f8cf829352b28b8/d9199/promise_state.png\"\n          alt=\"promise_state\"\n          title=\"promise_state\"\n          loading=\"lazy\"\n          style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        />\n      </picture>\n  </a>\n    </span></p>\n<h4 id=\"promise-객체-사용법\" style=\"position:relative;\"><a href=\"#promise-%EA%B0%9D%EC%B2%B4-%EC%82%AC%EC%9A%A9%EB%B2%95\" aria-label=\"promise 객체 사용법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>promise 객체 사용법</h4>\n<p>아래와 같이 생성하고</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">work</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\"어떤 한 작업이 성공적인가?\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">'success'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">reject</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fail'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>이렇게 사용합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">work</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// success</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// fail</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"asyncawait\" style=\"position:relative;\"><a href=\"#asyncawait\" aria-label=\"asyncawait permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>async/await</h3>\n<p>promise를 사용하게 되었음에도 <strong>promise를 then을 통해 한 단계 더 거쳐서 풀어야 함을 불편</strong>하게 여긴 개발자들은 더 직관적인 Syntactic sugar를 만들어냅니다.</p>\n<p>async를 앞에 추가한 함수는</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">promise</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token string\">'response'</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> res <span class=\"token operator\">=</span> <span class=\"token function\">promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// console: Promise {&lt;fulfilled>: 'response'}</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">asyncReq</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">const</span> message <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// response</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Promise 객체가 됩니다.</p>\n<p>그리고 await가 Promise를 then이 아닌 반환된 값을 바로 return해주는 문법입니다.</p>\n<p>말그대로 async로 돌아가는 함수 내부에서 await를 추가한 함수는 동기적으로 기다리겠다는 의미가 됩니다.</p>\n<p>async/await에 대한 예제코드입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> baseApi <span class=\"token operator\">=</span> axios<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  baseURL<span class=\"token operator\">:</span> <span class=\"token constant\">BASE_URL</span><span class=\"token punctuation\">,</span>\n  headers<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token string\">'Content-Type'</span><span class=\"token operator\">:</span> <span class=\"token string\">'application/json'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">login</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">id<span class=\"token punctuation\">,</span>pw</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">await</span> baseApi<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/api/login/'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n        id<span class=\"token punctuation\">,</span>\n        pw<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> res<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// 어딘가 에서 </span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">request</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">await</span> <span class=\"token function\">login</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">,</span>pw<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h4 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h4>\n<ul>\n<li><a href=\"https://velog.io/@open_h/javascriptasync\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">blog1</a></li>\n<li><a href=\"https://velog.io/@juno7803/JS%EB%B9%84%EB%8F%99%EA%B8%B0-%EC%B2%98%EB%A6%AC%EC%99%80-%EC%97%90%EB%9F%AC-%ED%95%B8%EB%93%A4%EB%A7%81\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">blog2</a></li>\n<li><a href=\"https://new93helloworld.tistory.com/m/361\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">blog3</a></li>\n<li><a href=\"https://velog.io/@coin46/%EB%B9%84%EB%8F%99%EA%B8%B0%EB%A5%BC-%EC%B2%98%EB%A6%AC%ED%95%98%EB%8A%94-%EC%BD%9C%EB%B0%B1-Promise-asyncawait\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">blog4</a></li>\n</ul>","fields":{"slug":"/posts/javascript/5","tagSlugs":["/tag/javascript/"]},"frontmatter":{"date":"2021-09-01T01:00:00","description":"콜백함수를 promise와 async/await를 통해 간결하게 사용해 봅니다.","tags":["javascript"],"title":"callback, promise, async/await","socialImage":{"publicURL":"/static/624cc4a835e68430a8beec01cef8ac6c/photo.jpg"}}}},"pageContext":{"slug":"/posts/javascript/5"}},"staticQueryHashes":["251939775","401334301","825871152"]}